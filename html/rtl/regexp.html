
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>

<!--
	Copyright (c) 1999-2006 by Digital Mars
	All Rights Reserved
	Written by Walter Bright
	www.digitalmars.com
  -->

<head>
<META http-equiv="content-type" content="text/html; charset=utf-8">
<title>Digital Mars - Runtime Library - regexp.h
</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div id="heading">
<a href="http://www.digitalmars.com/" target="_top"><IMG SRC="dmlogo.gif" BORDER=0 WIDTH=270 HEIGHT=53 ALT="www.digitalmars.com"></a>

<a href="http://www.digitalmars.com/" title="www.digitalmars.com">Home</a>
| <a href="../advancedsearch.html" title="Search Digital Mars web site">Search</a>
| <a href="../ctg/ctg.html" title="Compiler & Tools Guide">CTG</a>
| <a href="../rtl/rtl.html" title="Runtime Library Reference">RTL</a>
| <a href="../ugr/ugr.html" title="IDDE Reference">IDDE</a>
| <a href="../stl/index.html" title="Standard Template Library">STL</a>
| <a href="http://www.digitalmars.com/download/freecompiler.html" title="download C & C++ compiler">C/C++ Compiler</a>
| <a href="http://www.digitalmars.com/d/" title="D Programming Language">D</a>

	<div id="lastupdate">Last update Fri Apr 28 16:28:15 2006
</div>
</div>

<!-- Generated by Ddoc from regexp.d -->



<table border=1 cellpadding=8 cellspacing=0 frame="void" summary="this table is for layout only">
<tr>
<td valign="top" class="toc" nowrap>
<small>
<center>
<form method="get" action="http://www.google.com/search">
<input id="q" name="q" size="10" value="RTL Search" onFocus='if(this.value == "RTL Search"){this.value="";}'>
<input type="hidden" id="domains" name="domains" value="www.digitalmars.com">
<input type="hidden" id="sitesearch" name="sitesearch" value="www.digitalmars.com/rtl">
<input type="hidden" id="sourceid" name="sourceid" value="google-search">
<input type="submit" id="submit" name="submit" value="Go">
</form>

    <a href="rtl.html"><b>Runtime Library<br>Reference</b></a><br><br>
</center>

    &#183; <a href="constants.html">Constants</a><br>
    &#183; <a href="datatypes.html">Data types</a><br>

<hr><b>Standard C</b><br>

    &#183; <a href="assert.html">assert.h</a><br>
    &#183; <a href="complex.html">complex.h</a><br>
    &#183; <a href="ctype.html" title="character classification">ctype.h</a><br>
    &#183; <a href="fenv.html">fenv.h</a><br>
    &#183; <a href="float.html">float.h</a><br>
    &#183; <a href="locale.html">locale.h</a><br>
    &#183; <a href="math.html" title="math and trig">math.h</a><br>
    &#183; <a href="setjmp.html">setjmp.h</a><br>
    &#183; <a href="signal.html">signal.h</a><br>
    &#183; <a href="stdarg.html">stdarg.h</a><br>
    &#183; <a href="stddef.html">stddef.h</a><br>
    &#183; <a href="stdio.html">stdio.h</a><br>
    &#183; <a href="stdlib.html">stdlib.h</a><br>
    &#183; <a href="string.html">string.h</a><br>
    &#183; <a href="time.html">time.h</a><br>
    <br>

<hr><b>Standard C++</b><br>
    &#183; <a href="iostream.html">IOstream</a><br>
    &#183; <a href="new.html">new</a><br>
    <br>

<hr><b>Win32</b><br>
    &#183; <a href="gc.html" title="Hans Boehm garbage collector">gc.h</a><br>
    <br>

<hr><b>DOS, DOS32, Win16</b><br>
    &#183; <a href="bios.html" title="interface to BIOS API">bios.h</a><br>
    &#183; <a href="cerror.html" title="critical errors">cerror.h</a><br>
    &#183; <a href="disp.html" title="direct access to video display">disp.h</a><br>
    &#183; <a href="dos.html" title="interface to DOS API">dos.h</a><br>
    &#183; <a href="dos2.html">dos.h part 2</a><br>
    &#183; <a href="emm.html" title="expanded memory">emm.h</a><br>
    &#183; <a href="handle.html" title="handle pointers">handle.h</a><br>
    &#183; <a href="int.html" title="interrupt functions">int.h</a><br>
    &#183; <a href="msmouse.html" title="DOS mouse functions">msmouse.h</a><br>
    &#183; <a href="sound.html" title="interface to PC speaker">sound.h</a><br>
    &#183; <a href="swap.html">swap.h</a><br>
    &#183; <a href="tsr.html" title="Terminate Stay Resident functions">tsr.h</a><br>
    &#183; <a href="winio.html" title="Andrew Schulman's winio library">winio.h</a><br>
    <br>

<hr><b>Other C</b><br>
    &#183; <a href="bitops.html" title="access to CPU bit instructions">bitops.h</a><br>
    &#183; <a href="conio.html" title="console I/O">conio.h</a><br>
    &#183; <a href="controlc.html" title="control C">controlc.h</a><br>
    &#183; <a href="direct.html" title="directories">direct.h</a><br>
    &#183; <a href="fltpnt.html">fltpnt.h</a><br>
    &#183; <a href="io.html" title="low level file I/O">io.h</a><br>
    &#183; <a href="page.html" title="suballocate blocks of memory">page.h</a><br>
    &#183; <a href="process.html">process.h</a><br>
    &#183; <a href="search.html">search.h</a><br>
    &#183; <a href="sys-stat.html">sys\stat.h</a><br>
    &#183; <a href="tabsize.html">tabsize.h</a><br>
    &#183; <a href="../ctg/trace.html" title="Trace Dynamic Profiling">trace.h</a><br>
    &#183; <a href="time.html">utime.h</a><br>
    &#183; <a href="unmangle.html">unmangle.h</a><br>
    &#183; <a href="util.html">util.h</a><br>
    <br>

<hr><b>Other C++</b><br>
    &#183; <a href="regexp.html" title="regular expressions">regexp.h</a><br>
    &#183; <a href="oldcomplex.html">class complex</a><br>
    <br>

</small>

<hr>

</td>
<td valign="top">

<h1>regexp.h</h1>

RegExp is a C++ class to handle regular expressions.
<a href="../ctg/regular.html" title="Regular Expressions" target="_top">Regular expressions</a>
are a powerful method of string pattern matching. The RegExp class is
the core foundation for adding powerful string pattern matching capabilities
to programs like grep, text editors, awk, sed, etc. The regular expression
language used is the same as that commonly used, however, some of the very
advanced forms may behave slightly differently.
<p>
The linkable runtime library version of RegExp is for ASCII chars. To use
it with Unicode, compile the file \dm\src\core\regexp.cpp:

<pre>
	sc -c regexp -D_UNICODE
</pre>

RegExp class members are:
<pre>
    RegExp();
    ~RegExp();

    unsigned re_nsub;
    regmatch_t *pmatch;

    int compile(char *pattern, char *attributes, int ref);
    int test(char *string, int startindex = 0);

    char *replace(char *format);
    char *replace2(char *format);

    static char *replace3(char *format, char *input,
	unsigned re_nsub, regmatch_t *pmatch);
    static char *replace4(char *input, regmatch_t *text, char *replacement);
</pre>

<hr>

<dl>
<dt><tt>struct regmatch_t</tt><dd>

    Is a simple type representing a match. It contains the members:
    <p>

    <dl>
 	<dt><tt>int rm_so;</tt> <dd>index into the <i>input</i> string of the start of a match
 	<dt><tt>int rm_eo;</tt> <dd>index just past the end of the match
    </dl>
    <p>

<dt><tt>RegExp();</tt><dd>

    This is the constructor. It builds a regular expression object.
    <p>

<dt><tt>~RegExp();</tt><dd>

    This is the destructor.
    <p>

<dt><tt>unsigned re_nsub;</tt>
<dt><tt>regmatch_t *pmatch;</tt>
    <dd>

    <i>pmatch[0]</i> contains the match for the entire regular expression.
    If the regular expression contained parenthesized subexpressions, the matches
    for those subexpressions are in the <i>pmatch[1..re_nsub]</i> array.
    <p>

<dt><tt>int compile(char *pattern, char *attributes, int ref);</tt><dd>

    Compiles a regular expression given by <i>pattern</i> and modified by
    <i>attributes</i> into an internal format.
    A regular expression must be compiled
    before it is used. Separating the compilation step from the match step
    means that the time consuming compilation needs to be done only once, and then
    the fast executing internal format can be used for repeated matches.

    <dl>
	<dt> <i>pattern</i> <dd>is the regular expression string.
	<dt> <i>attributes</i> <dd>is NULL or a string containing either or both of the
	characters <b>i</b> and <b>g</b>:

	<dl>
	<dt><b>i</b> <dd>the regular expression is case insensitive
	<dt><b>g</b> <dd>the regular expression is global
	</dl>

	<dt><i>ref</i> <dd>is a flag to the RegExp object:

	<dl>
	<dt><b>0</b> <dd>The RegExp object should make its own copy of
			<i>pattern</i>.
	<dt><b>1</b> <dd> The RegExp object can refer to the caller's copy
			of the <i>pattern</i> string.
			This means that the <i>pattern</i> string cannot be
			free'd or delete'd until the RegExp object is destructed.
	</dl>
    </dl>
    <h4>Return Value</h4>

    <dl>
	    <dt><b>!=0</b> <dd>Successful compilation
	    <dt><b>0</b> <dd>Failed to compile - the regular expression was not
		    valid
    </dl>
    <p>


<dt><tt>int test(char *string, int startindex = 0);</tt><dd>


    Scans a <i>string</i> starting at position <i>startindex</i> looking for
    a match against the previously compiled regular expression.

    <h4>Return Value</h4>

    <dl>
	<dt><b>!=0</b> <dd>Successful match. Member <i>pmatch[0]</i> is set to
	where the expression match is, and <i>pmatch[1..re_nsub]</i> is the array
	of any subexpression matches.
	<dt><b>0</b> <dd>Failed to find a match.
    </dl>
    <p>

<dt><tt>char *replace(char *format);</tt><dd>

    Once a regular expression has been run through <i>compile()</i> and matched
    against a source string with <i>test()</i>, then <i>replace()</i> can be used
    to merge a <i>format</i> string with the matched text.
    <p>

    The <i>format</i> string consists of:
    <dl>
	<dt><b>&amp;</b> <dd>replace this character with the match specified
	by member <i>text</i>.

	<dt><b>\<i>n</i></b> <dd>replace with the <i>n</i>th subexpression,
	where <i>n</i>
	is 1..9, specified by member <i>pmatch[n]</i>.

	<dt><b>\<i>c</i></b> <dd>replace with the character <i>c</i>.

	<dt><b><i>c</i></b> <dd>any other characters <i>c</i> are copied to the
	output string.
    </dl>

    <h4>Return Value</h4>

	The merged output string is returned. It was allocated by malloc(),
	and so should be free'd by free().
    <p>

<dt><tt>char *replace2(char *format);</tt><dd>

    This is more advanced than <i>replace()</i> in that it can handle more than
    9 subexpressions.

    The <i>format</i> string consists of:
    <dl>
	<dt><b>$$</b> <dd>$

	<dt><b>$&amp;</b> <dd>The matched substring.

	<dt><b>$`</b> <dd>The portion of string that precedes the matched substring.

	<dt><b>$'</b> <dd>The portion of string that follows the matched substring.

	<dt><b>$<i>n</i></b>
		<dd>The <i>n</i>th capture, where <i>n</i> is a single digit 1-9
		and $<i>n</i> is not followed by a decimal digit.
		If <i>n</i> &lt;= <i>re_nsub</i> and the nth capture is undefined, use the empty
		string instead. If <i>n</i> &gt; <i>re_nsub</i>,
		no characters are copied to the output.

	<dt><b>$<i>nn</i></b> <dd>The <i>nn</i>th capture, where <i>nn</i>
		is a two-digit decimal number 01-99.
		If <i>nn</i> &lt;= <i>re_nsub</i> and the <i>nn</i>th capture is undefined, use the empty
		string instead. If <i>nn</i> &gt; <i>re_nsub</i>,
		no characters are copied to the output.

	<dt><b>$<i>c</i></b> <dd>where <i>c</i> is any other character causes
		$<i>c</i> to be copied to the output string.

	<dt><b><i>c</i></b> <dd>any other characters <i>c</i> are copied to the
	output string.
    </dl>
    <p>


<dt><tt>static char *replace3(char *format, char *input, regmatch_t *text,
    unsigned re_nsub, regmatch_t *pmatch);</tt><dd>

    <i>replace3()</i> is the same as <i>replace2()</i>, except that it
    does not need a RegExp instance. Instead, it requires the parameters:

    <dl>
	<dt><i>input</i> <dd>The source string from where the matched
		text comes from.
	<dt><i>re_nsub</i> <dd>Number of subexpression matches.
	<dt><i>pmatch[1+re_nsub]</i> <dd>Array of those subexpression matches,
		with <i>pmatch[0]</i> being the match for the entire expression.
    </dl>
    <p>

<dt><tt>static char *replace4(char *input, regmatch_t *text, char *replacement);
</tt><dd>

    <i>replace4()</i> does not require a RegExp instance. It performs a simple
    merge of <i>input</i> with <i>replacement</i>. Characters from
    <i>input[text-&gt;re_so]</i> to <i>input[text-&gt;re_eo]</i> are replaced with
    <i>replacement</i>.

</dl>


<br><br><br><br>

</td></table>




<div id="copyright">
Copyright &copy; 1997-2006 by Digital Mars, All Rights Reserved |
Page generated by <a href="http://www.digitalmars.com/d/ddoc.html">Ddoc</a>.
</div>

</body>
</html>

