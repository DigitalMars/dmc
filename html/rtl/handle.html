
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>

<!--
	Copyright (c) 1999-2006 by Digital Mars
	All Rights Reserved
	Written by Walter Bright
	www.digitalmars.com
  -->

<head>
<META http-equiv="content-type" content="text/html; charset=utf-8">
<title>Digital Mars - Runtime Library - handle.h
</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div id="heading">
<a href="http://www.digitalmars.com/" target="_top"><IMG SRC="dmlogo.gif" BORDER=0 WIDTH=270 HEIGHT=53 ALT="www.digitalmars.com"></a>

<a href="http://www.digitalmars.com/" title="www.digitalmars.com">Home</a>
| <a href="../advancedsearch.html" title="Search Digital Mars web site">Search</a>
| <a href="../ctg/ctg.html" title="Compiler & Tools Guide">CTG</a>
| <a href="../rtl/rtl.html" title="Runtime Library Reference">RTL</a>
| <a href="../ugr/ugr.html" title="IDDE Reference">IDDE</a>
| <a href="../stl/index.html" title="Standard Template Library">STL</a>
| <a href="http://www.digitalmars.com/download/freecompiler.html" title="download C & C++ compiler">C/C++ Compiler</a>
| <a href="http://www.digitalmars.com/d/" title="D Programming Language">D</a>

	<div id="lastupdate">Last update Fri Apr 28 16:28:14 2006
</div>
</div>

<!-- Generated by Ddoc from handle.d -->




<table border=1 cellpadding=8 cellspacing=0 frame="void" summary="this table is for layout only">
<tr>
<td valign="top" class="toc" nowrap>
<small>
<center>
<form method="get" action="http://www.google.com/search">
<input id="q" name="q" size="10" value="RTL Search" onFocus='if(this.value == "RTL Search"){this.value="";}'>
<input type="hidden" id="domains" name="domains" value="www.digitalmars.com">
<input type="hidden" id="sitesearch" name="sitesearch" value="www.digitalmars.com/rtl">
<input type="hidden" id="sourceid" name="sourceid" value="google-search">
<input type="submit" id="submit" name="submit" value="Go">
</form>

    <a href="rtl.html"><b>Runtime Library<br>Reference</b></a><br><br>
</center>

    &#183; <a href="constants.html">Constants</a><br>
    &#183; <a href="datatypes.html">Data types</a><br>

<hr><b>Standard C</b><br>

    &#183; <a href="assert.html">assert.h</a><br>
    &#183; <a href="complex.html">complex.h</a><br>
    &#183; <a href="ctype.html" title="character classification">ctype.h</a><br>
    &#183; <a href="fenv.html">fenv.h</a><br>
    &#183; <a href="float.html">float.h</a><br>
    &#183; <a href="locale.html">locale.h</a><br>
    &#183; <a href="math.html" title="math and trig">math.h</a><br>
    &#183; <a href="setjmp.html">setjmp.h</a><br>
    &#183; <a href="signal.html">signal.h</a><br>
    &#183; <a href="stdarg.html">stdarg.h</a><br>
    &#183; <a href="stddef.html">stddef.h</a><br>
    &#183; <a href="stdio.html">stdio.h</a><br>
    &#183; <a href="stdlib.html">stdlib.h</a><br>
    &#183; <a href="string.html">string.h</a><br>
    &#183; <a href="time.html">time.h</a><br>
    <br>

<hr><b>Standard C++</b><br>
    &#183; <a href="iostream.html">IOstream</a><br>
    &#183; <a href="new.html">new</a><br>
    <br>

<hr><b>Win32</b><br>
    &#183; <a href="gc.html" title="Hans Boehm garbage collector">gc.h</a><br>
    <br>

<hr><b>DOS, DOS32, Win16</b><br>
    &#183; <a href="bios.html" title="interface to BIOS API">bios.h</a><br>
    &#183; <a href="cerror.html" title="critical errors">cerror.h</a><br>
    &#183; <a href="disp.html" title="direct access to video display">disp.h</a><br>
    &#183; <a href="dos.html" title="interface to DOS API">dos.h</a><br>
    &#183; <a href="dos2.html">dos.h part 2</a><br>
    &#183; <a href="emm.html" title="expanded memory">emm.h</a><br>
    &#183; <a href="handle.html" title="handle pointers">handle.h</a><br>
    &#183; <a href="int.html" title="interrupt functions">int.h</a><br>
    &#183; <a href="msmouse.html" title="DOS mouse functions">msmouse.h</a><br>
    &#183; <a href="sound.html" title="interface to PC speaker">sound.h</a><br>
    &#183; <a href="swap.html">swap.h</a><br>
    &#183; <a href="tsr.html" title="Terminate Stay Resident functions">tsr.h</a><br>
    &#183; <a href="winio.html" title="Andrew Schulman's winio library">winio.h</a><br>
    <br>

<hr><b>Other C</b><br>
    &#183; <a href="bitops.html" title="access to CPU bit instructions">bitops.h</a><br>
    &#183; <a href="conio.html" title="console I/O">conio.h</a><br>
    &#183; <a href="controlc.html" title="control C">controlc.h</a><br>
    &#183; <a href="direct.html" title="directories">direct.h</a><br>
    &#183; <a href="fltpnt.html">fltpnt.h</a><br>
    &#183; <a href="io.html" title="low level file I/O">io.h</a><br>
    &#183; <a href="page.html" title="suballocate blocks of memory">page.h</a><br>
    &#183; <a href="process.html">process.h</a><br>
    &#183; <a href="search.html">search.h</a><br>
    &#183; <a href="sys-stat.html">sys\stat.h</a><br>
    &#183; <a href="tabsize.html">tabsize.h</a><br>
    &#183; <a href="../ctg/trace.html" title="Trace Dynamic Profiling">trace.h</a><br>
    &#183; <a href="time.html">utime.h</a><br>
    &#183; <a href="unmangle.html">unmangle.h</a><br>
    &#183; <a href="util.html">util.h</a><br>
    <br>

<hr><b>Other C++</b><br>
    &#183; <a href="regexp.html" title="regular expressions">regexp.h</a><br>
    &#183; <a href="oldcomplex.html">class complex</a><br>
    <br>

</small>

<hr>

</td>
<td valign="top">


<h1>handle.h</h1>

<ul>
	<li><a href="#handle_calloc"><b>handle_calloc</b></a>
	<li><a href="#handle_free"><b>handle_free</b></a>
	<li><a href="#handle_ishandle"><b>handle_ishandle</b></a>
	<li><a href="#handle_malloc"><b>handle_malloc</b></a>
	<li><a href="#handle_realloc"><b>handle_realloc</b></a>
	<li><a href="#handle_strdup"><b>handle_strdup</b></a>
</ul>

<hr><!-- =========================================== -->

<a name="handle_calloc">
<h2>handle_calloc</h2>
</a>

<font size=3><b>
Header
</b><br><br>
handle.h
<br><br>

<b>
Prototype
</b><br><br>
void __handle *handle_calloc(unsigned size); 
<br><br>

<b>
Description
</b><br><br>
The handle_calloc function allocates and clears a block of data, 
size bytes long, from handle (EMS) memory. If you use this 
function to allocate handle memory, you must use handle_
functions to manage this memory.<br><br>

The handle_calloc function returns a __handle pointer that 
can, with a few restrictions, be used in the same way as any other 
pointer. A special function, handle_strdup, is provided to make a 
copy of a string in handle space.<br><br>

Handle pointers can be used in most situations that a far data pointer 
could be used. A __handle pointer should be assigned to a normal 
far pointer before being passed to a formatted print routine. Handle 
memory cannot currently be used for code.<br><br>

The use of handle memory can be "locked out" by #defining 
NO_HANDLE before including handle. h, in which case any use of 
handle pointers and functions defaults to normal pointers and 
memory allocation routines.<br><br>

Note<br>
If handle (EMS) memory is not present in the host 
system the _handle functions act as if NO_HANDLE 
is defined. This also occurs when the X, P, or N 
memory models are used. 
<br><br>

<b>
Return Value
</b><br><br>
A __handle pointer to the allocated memory. 
<br><br>

<b>
Compatibility
</b><br><br>
DOS Windows 3.x Phar Lap DOSX Win32 
<br><br>

<b>
See Also
</b><br><br>
<a href="#handle_malloc">handle_malloc</a><br>
<a href="#handle_free">handle_free</a><br>
<a href="#handle_realloc ">handle_realloc</a>
<br><br>




<hr><!-- =========================================== -->

<a name="handle_free">
<h2>handle_free</h2>
</a>

<font size=3><b>
Header
</b><br><br>
handle.h
<br><br>

<b>
Prototype
</b><br><br>
void handle_free(void __handle *hptr);  
<br><br>

<b>
Description
</b><br><br>
The handle_free function frees the memory pointed to by the 
__handle pointer hptr, that was previously allocated by 
handle_malloc or handle_calloc. 
<br><br>

<b>
Return Value
</b><br><br>
None
<br><br>

<b>
Compatibility
</b><br><br>
DOS Windows 3.x Phar Lap DOSX Win32 
<br><br>

<b>
See Also
</b><br><br>
<a href="#handle_calloc">handle_calloc</a><br>
<a href="#handle_malloc">handle_malloc</a>
<br><br>

<b>
Example
</b><br><pre>
See handle_malloc
</pre>


<hr><!-- =========================================== -->

<a name="handle_ishandle">
<h2>handle_ishandle</h2>
</a>

<font size=3><b>
Header
</b><br><br>
handle.h
<br><br>

<b>
Prototype
</b><br><br>
int handle_ishandle(void __handle *hptr); 
<br><br>

<b>
Description
</b><br><br>
The handle_ishandle function tests whether hptr is a true 
__handle pointer or a far pointer. If there is no handle memory 
present, __handle pointers default to being normal pointers. 
<br><br>

<b>
Return Value
</b><br><br>
Returns 1 if hptr is a __handle pointer; otherwise returns 0. 
<br><br>

<b>
Compatibility
</b><br><br>
DOS Windows 3.x Phar Lap DOSX Win32 
<br><br>

<b>
See Also
</b><br><br>
<a href="#handle_malloc 
">handle_malloc 
</a>
<br><br>

<b>
Example
</b><br><br><pre>
See handle_malloc 
</pre><br><br>




<hr><!-- =========================================== -->

<a name="handle_malloc">
<h2>handle_malloc</h2>
</a>

<font size=3><b>
Header
</b><br><br>
handle. h 
<br><br>

<b>
Prototype
</b><br><br>
void __handle *handle_malloc(unsigned size); 
<br><br>

<b>
Description
</b><br><br>
The handle_malloc function allocates a block of handle (EMS) 
memory of size bytes from handle space. When you use 
handle_malloc to allocate handle memory, you must use 
handle_functions to manage this memory.<br><br> 

The handle_malloc function returns a __handle pointer that 
can, with a few restrictions, be used in the same way as any other 
pointer. A special function, handle_strdup, is provided to make a 
copy of a string in handle space.<br><br>

Handle pointers can be used in most situations that a far data pointer 
could be used. A __handle pointer should be assigned to a normal 
far pointer before being passed to a formatted print routine. Handle 
memory cannot currently be used for code.<br><br>

The use of handle memory can be "locked out" by #defining 
NO_HANDLE before including handle. h, in which case any use of 
handle pointers and functions defaults to normal pointers and 
memory allocation routines.<br><br>

Note<br>
If handle (EMS) memory is not present in the host 
system the _handle functions act as if NO_HANDLE 
were defined. This also occurs when the X or P 
memory models are used. 
<br><br>

<b>
Return Value
</b><br><br>
A __handle pointer to the allocated memory. 
<br><br>

<b>
Compatibility
</b><br><br>
DOS Windows 3.x Phar Lap DOSX Win32 
<br><br>

<b>
See Also
</b><br><br>
<a href="#handle_calloc">handle_calloc</a><br>
<a href="#handle_free">handle_free</a><br>
<a href="#handle_malloc">handle_malloc</a>
<br><br>

<b>
Example
</b><br><br><pre>
	/* 	Example for handle_malloc */ 

	#include &lt;stdio.h&gt;
	#include &lt;handle.h&gt;
	#include &lt;stdlib.h&gt;

	/* C and L models ONLY */ 

	void main () 
	{ 
	   char __handle *hptr; 
	   char __handle *cptr; 
	   char *p; 

	   hptr = handle_malloc (256); 
	   if (handle_ishandle (hptr) == 0) 
	      sprintf (hptr, "This string is in normal 
		       memory"); 
	   else 
	      sprintf (hptr, "This string is in handle 
		       memory"); 
	   p = hptr; 
	   printf ("% s -handle pointer is %p\n", p, 
		    hptr); 
	   cptr = handle_strdup (hptr); 
	   p = cptr; 
	   printf ("% s -this time from %p\n", p, cptr); 
	   handle_free (hptr); 
	   handle_free (cptr); 
	   printf ("All Handles freed\n"); 
	} 
</pre><br><br>




<hr><!-- =========================================== -->

<a name="handle_realloc">
<h2>handle_realloc</h2>
</a>

<font size=3><b>
Header
</b><br><br>
handle. h 
<br><br>

<b>
Prototype
</b><br><br>
void __handle *handle_realloc(void __handle<br>
*hptr, unsigned nbytes); 
<br><br>

<b>
Description
</b><br><br>
The handle_realloc function reallocates (changes the size of) a 
block of memory that was allocated by handle_malloc or 
handle_calloc. 
<br><br>

<b>
Return Value
</b><br><br>
A __handle pointer to the reallocated data block. 
<br><br>

<b>
Compatibility
</b><br><br>
DOS Windows 3.x Phar Lap DOSX Win32 
<br><br>

<b>
See Also
</b><br><br>
<a href="#handle_calloc">handle_calloc</a><br>
<a href="#handle_malloc">handle_malloc</a>
<br><br>

<b>
Example
</b><br><br><pre>
See handle_malloc 
</pre><br><br>



<hr><!-- =========================================== -->

<a name="handle_strdup">
<h2>handle_strdup</h2>
</a>

<font size=3><b>
Header
</b><br><br>
handle.h
<br><br>

<b>
Prototype
</b><br><br>
char __handle *handle_strdup(char __handle *hptr); 
<br><br>

<b>
Description
</b><br><br>
The handle_strdup function uses handle_malloc to allocate a block 
of memory in handle space, and then makes a copy of the string pointed 
to by the __handle pointer hptr in the allocated memory. 
<br><br>

<b>
Return Value
</b><br><br>
A __handle pointer to the duplicated string. 
<br><br>

<b>
Compatibility
</b><br><br>
DOS Windows 3.x Phar Lap DOSX Win32 
<br><br>

<b>
See Also
</b><br><br>
<a href="#handle_malloc">handle_malloc</a>
<br><br>

<b>
Example
</b><br><br><pre>
See handle_malloc 
</pre><br><br>


<br><br><br><br>

</td></table>





<div id="copyright">
Copyright &copy; 1997-2006 by Digital Mars, All Rights Reserved |
Page generated by <a href="http://www.digitalmars.com/d/ddoc.html">Ddoc</a>.
</div>

</body>
</html>

