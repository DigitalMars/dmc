
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>

<!--
	Copyright (c) 1999-2006 by Digital Mars
	All Rights Reserved
	Written by Walter Bright
	www.digitalmars.com
  -->

<head>
<META http-equiv="content-type" content="text/html; charset=utf-8">
<title>Digital Mars - Runtime Library - float.h
</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div id="heading">
<a href="http://www.digitalmars.com/" target="_top"><IMG SRC="dmlogo.gif" BORDER=0 WIDTH=270 HEIGHT=53 ALT="www.digitalmars.com"></a>

<a href="http://www.digitalmars.com/" title="www.digitalmars.com">Home</a>
| <a href="../advancedsearch.html" title="Search Digital Mars web site">Search</a>
| <a href="../ctg/ctg.html" title="Compiler & Tools Guide">CTG</a>
| <a href="../rtl/rtl.html" title="Runtime Library Reference">RTL</a>
| <a href="../ugr/ugr.html" title="IDDE Reference">IDDE</a>
| <a href="../stl/index.html" title="Standard Template Library">STL</a>
| <a href="http://www.digitalmars.com/download/freecompiler.html" title="download C & C++ compiler">C/C++ Compiler</a>
| <a href="http://www.digitalmars.com/d/" title="D Programming Language">D</a>

	<div id="lastupdate">Last update Fri Apr 28 16:28:14 2006
</div>
</div>

<!-- Generated by Ddoc from float.d -->



<table border=1 cellpadding=8 cellspacing=0 frame="void" summary="this table is for layout only">
<tr>
<td valign="top" class="toc" nowrap>
<small>
<center>
<form method="get" action="http://www.google.com/search">
<input id="q" name="q" size="10" value="RTL Search" onFocus='if(this.value == "RTL Search"){this.value="";}'>
<input type="hidden" id="domains" name="domains" value="www.digitalmars.com">
<input type="hidden" id="sitesearch" name="sitesearch" value="www.digitalmars.com/rtl">
<input type="hidden" id="sourceid" name="sourceid" value="google-search">
<input type="submit" id="submit" name="submit" value="Go">
</form>

    <a href="rtl.html"><b>Runtime Library<br>Reference</b></a><br><br>
</center>

    &#183; <a href="constants.html">Constants</a><br>
    &#183; <a href="datatypes.html">Data types</a><br>

<hr><b>Standard C</b><br>

    &#183; <a href="assert.html">assert.h</a><br>
    &#183; <a href="complex.html">complex.h</a><br>
    &#183; <a href="ctype.html" title="character classification">ctype.h</a><br>
    &#183; <a href="fenv.html">fenv.h</a><br>
    &#183; <a href="float.html">float.h</a><br>
    &#183; <a href="locale.html">locale.h</a><br>
    &#183; <a href="math.html" title="math and trig">math.h</a><br>
    &#183; <a href="setjmp.html">setjmp.h</a><br>
    &#183; <a href="signal.html">signal.h</a><br>
    &#183; <a href="stdarg.html">stdarg.h</a><br>
    &#183; <a href="stddef.html">stddef.h</a><br>
    &#183; <a href="stdio.html">stdio.h</a><br>
    &#183; <a href="stdlib.html">stdlib.h</a><br>
    &#183; <a href="string.html">string.h</a><br>
    &#183; <a href="time.html">time.h</a><br>
    <br>

<hr><b>Standard C++</b><br>
    &#183; <a href="iostream.html">IOstream</a><br>
    &#183; <a href="new.html">new</a><br>
    <br>

<hr><b>Win32</b><br>
    &#183; <a href="gc.html" title="Hans Boehm garbage collector">gc.h</a><br>
    <br>

<hr><b>DOS, DOS32, Win16</b><br>
    &#183; <a href="bios.html" title="interface to BIOS API">bios.h</a><br>
    &#183; <a href="cerror.html" title="critical errors">cerror.h</a><br>
    &#183; <a href="disp.html" title="direct access to video display">disp.h</a><br>
    &#183; <a href="dos.html" title="interface to DOS API">dos.h</a><br>
    &#183; <a href="dos2.html">dos.h part 2</a><br>
    &#183; <a href="emm.html" title="expanded memory">emm.h</a><br>
    &#183; <a href="handle.html" title="handle pointers">handle.h</a><br>
    &#183; <a href="int.html" title="interrupt functions">int.h</a><br>
    &#183; <a href="msmouse.html" title="DOS mouse functions">msmouse.h</a><br>
    &#183; <a href="sound.html" title="interface to PC speaker">sound.h</a><br>
    &#183; <a href="swap.html">swap.h</a><br>
    &#183; <a href="tsr.html" title="Terminate Stay Resident functions">tsr.h</a><br>
    &#183; <a href="winio.html" title="Andrew Schulman's winio library">winio.h</a><br>
    <br>

<hr><b>Other C</b><br>
    &#183; <a href="bitops.html" title="access to CPU bit instructions">bitops.h</a><br>
    &#183; <a href="conio.html" title="console I/O">conio.h</a><br>
    &#183; <a href="controlc.html" title="control C">controlc.h</a><br>
    &#183; <a href="direct.html" title="directories">direct.h</a><br>
    &#183; <a href="fltpnt.html">fltpnt.h</a><br>
    &#183; <a href="io.html" title="low level file I/O">io.h</a><br>
    &#183; <a href="page.html" title="suballocate blocks of memory">page.h</a><br>
    &#183; <a href="process.html">process.h</a><br>
    &#183; <a href="search.html">search.h</a><br>
    &#183; <a href="sys-stat.html">sys\stat.h</a><br>
    &#183; <a href="tabsize.html">tabsize.h</a><br>
    &#183; <a href="../ctg/trace.html" title="Trace Dynamic Profiling">trace.h</a><br>
    &#183; <a href="time.html">utime.h</a><br>
    &#183; <a href="unmangle.html">unmangle.h</a><br>
    &#183; <a href="util.html">util.h</a><br>
    <br>

<hr><b>Other C++</b><br>
    &#183; <a href="regexp.html" title="regular expressions">regexp.h</a><br>
    &#183; <a href="oldcomplex.html">class complex</a><br>
    <br>

</small>

<hr>

</td>
<td valign="top">


<h1>float.h</h1>

<ul>
	<li><a href="#_8087"><b>_8087</b></a>
	<li><a href="#_clear87"><b>_clear87</b></a>
	<li><a href="#_control87"><b>_control87</b></a>
	<li><a href="#_fpreset"><b>_fpreset</b></a>
	<li><a href="#_status87"><b>_status87</b></a>
</ul>

<!-- =========================================== -->

<hr> <h2><a name="_8087">_8087</a></h2><dl> 

<dt><b>Header</b></dt> <dd>float.h
</dd>

<dt><b>Prototype</b></dt> <dd><tt>extern int _8087; 
</tt></dd>

<dt><b>Description</b></dt> <dd>
This variable tests whether an 8087 family coprocessor is present. If 
present, the coprocessor performs the floating-point calculations. If 
not present, software emulation performs the floating-point 
calculations. The _8087 variable can have the following values:<p>
<dl>
<dt>0
<dd>No coprocessor present 
<dt>1
<dd>8087 present 
<dt>2
<dd>80287 present 
<dt>3
<dd>80387 present (or 80486 installed) 
</dl><p>
The _8087 variable is useful when code must account for 
differences between coprocessors, or can take advantage of 80387 
instructions. 
</dd>

<dt><b>Compatibility</b></dt> <dd>DOS Windows 3.x Phar Lap DOSX Win32 
</dd>

 </dl>


<!-- =========================================== -->

<hr> <h2><a name="_clear87">_clear87</a></h2><dl> 

<dt><b>Header</b></dt> <dd>float.h
</dd>

<dt><b>Prototype</b></dt> <dd><tt>unsigned int _clear87(void); 
</tt></dd>

<dt><b>Description</b></dt> <dd>The _clear87 function gets and clears the coprocessor's floating-point status word. Intel coprocessors have a pair of 16-bit values that are useful to the serious mathematical programmer. The status word contains bits that are used to examine the current condition of the coprocessor. Bit 7 is the error status bit; if it is set, an error has occurred. Bits 0 through 5 are the exception indicators. They are sticky bits; once they are set, they must be manually cleared. Most compilers provide special functions for clearing the status word.<br>
<pre>
0 	Invalid		If set, an error has occurred that is not 
	Operation	covered by the other exception 
			indicators. Trying to obtain the square 
			root of a negative number, for example, 
			will set this bit. This is equivalent to the 
			FE_INVALID exception.	 
1 	Denormal 	A denormal number has an exponent of 
	Exception	zero and a significand that is not zero. In 
			general, denormalized numbers are 
			caused by a calculation or formatting 
			error.
2 	Zero Divide 	Dividing by zero will generate this 
			exception. This corresponds to the 
			FE_DIVBYZERO exception. 
3 	Overflow 	This exception occurs when an 
			operation that would result in a number 
			too large to be represented by the 
			coprocessor. This corresponds to the 
			FE_OVERFLOW exception.
4 	Underflow 	This exception is generated by an 
			operation that would result in a number 
			too small to be represented by the 
			coprocessor. This corresponds to the 
			FE_UNDERFLOW exception. 
5 	Precision 	When a calculated result cannot be 
	Lost		exactly represented by the coprocessor, 
			this exception is generated. For example, 
			dividing 1.0 by 3. 0 will generate a 
			Precision Lost exception, since 1/ 3 
			cannot be exactly stored in a floating-
			point number. This corresponds to the 
			FE_INEXACT exception.
</pre>
</dd>

<dt><b>Return Value</b></dt> <dd>The floating-point status.
</dd>

<dt><b>Compatibility</b></dt> <dd>DOS Windows 3.x Phar Lap DOSX Win32 
</dd>

<dt><b>See Also</b></dt> <dd><a href="#_control87">_control87</a><br>
<a href="#_status87">_status87</a>
</dd>

<dt><b>Example</b></dt> <dd><pre class="ccode">/* 	Example for _clear87 
	Also demonstrates _control87, _status87 
*/ 
#include &lt;float.h&gt; 
#include &lt;stdio.h&gt; 
#include &lt;stdlib.h&gt; 

void main() 
{   
   double a = 1e-40;

   printf (" Status: %. 4x 
	     -control\n", _control87(0,0)); 
   printf (" 24 bit precision: 0x%. 4x\n", 
	     _control87(_PC_24, _MCW_PC)); 
   printf (" Status: %. 4x -clear\n",_clear87()); 
   printf (" Status: %. 4x -inexact, 
	     underflow\n", _status87()); 
}
</pre></dd>

<dt><b>Output</b></dt> <dd><pre class="console">Status: 1332 -control<br>
24 bit precision: 0x1332<br>
Status: 0000 -clear<br>
Status: 0000 -inexact, underflow
</pre></dd>

 </dl>


<!-- =========================================== -->

<hr> <h2><a name="_control87">_control87</a></h2><dl> 

<dt><b>Header</b></dt> <dd>float.h
</dd>

<dt><b>Prototype</b></dt> <dd><tt>unsigned int _control87(unsigned int new, unsigned int mask); 
</tt></dd>

<dt><b>Description</b></dt> <dd>The _control87 function gets and sets the coprocessor's control word, which is used to change the behavior of the coprocessor. Its important bits are:<br>
<dl>
<dt>0 .. 6 
<dd>These exception mask bits correspond to the exception indicators in the status register. When an exception occurs, the exception indicator in the status register is set and the corresponding bit in the control word is checked. If the control bit is zero (unmasked), an interrupt is generated to indicate a problem occurred.  This is the interrupt captured for exception handlers installed with signal. If the control bit is 1 (masked), no interrupt is generated. 
<dt>10 .. 11 
<dd>These rounding control bits affect how the coprocessor handles rounding. Values are:<p>

00 --round toward nearest or even<br>
01 --round toward negative infinity<br>
10 --round toward positive infinity<br>
11 --round toward zero (truncate)
</dl><br>

If mask is zero, _control87 simply returns the current value of the control word. If mask is non-zero, the bits in the control word are changed using this formula:<p>

<pre class="ccode">if (mask != 0)
    cw = ((cw &amp; ~ mask) | (new &amp; mask));
</pre>

where cw is the current value of the control word. See the Digital Mars C++ Compiler and Tools Guide for more information.
</dd>

<dt><b>Return Value</b></dt> <dd>The floating point control state.
</dd>

<dt><b>Compatibility</b></dt> <dd>DOS Windows 3.x Phar Lap DOSX Win32 
</dd>

<dt><b>See Also</b></dt> <dd><a href="#_clear87">_clear87</a><br>
<a href="#_status87">_status87</a>
</dd>

 </dl>



<!-- =========================================== -->

<hr> <h2><a name="_fpreset">_fpreset</a></h2><dl> 

<dt><b>Header</b></dt> <dd>float.h
</dd>

<dt><b>Prototype</b></dt> <dd><tt>void _fpreset (void); 
</tt></dd>

<dt><b>Description</b></dt> <dd>The _fpreset function reinitializes the floating-point math 
package. It is often necessary to reinitialize this package after using 
signal, system, _exec, or spawn functions.<p> 

You can call _fpreset and then use longjmp to recover from 
floating-point errors, if a program traps floating-point error signals.<p>

In versions of DOS that are earlier than 3.0, a child process may 
affect the floating-point state of the parent process if an 8087, 80287, 
or 80387 coprocessor is used. The following precautions are 
recommended when using these coprocessors:<p>

<ul><li>Do not call _exec, _spawn, or system during the
evaluation of a floating-point expression.</li>
<li>After using any of the above routines, call _fpreset
function if there is a possibility of the child process
performing any floating-point operations.</li>
</ul>
</dd>

<dt><b>Return Value</b></dt> <dd>None
</dd>

<dt><b>Compatibility</b></dt> <dd>DOS Windows 3.x Phar Lap DOSX Win32 
</dd>

<dt><b>See Also</b></dt> <dd><a href="process.html#_exec">_exec Functions</a><br>
<a href="signal.html#signal">signal</a><br>
<a href="process.html#_spawn">_spawn Functions</a><br>
<a href="#system">system</a>
</dd>

 </dl>


<!-- =========================================== -->

<hr> <h2><a name="_status87">_status87</a></h2><dl> 

<dt><b>Header</b></dt> <dd>float.h
</dd>

<dt><b>Prototype</b></dt> <dd><tt>unsigned int _status87(void); 
</tt></dd>

<dt><b>Description</b></dt> <dd>The _status87 function gets the floating-point status word. This status word is the combination of the 80x87 status word and the conditions detected by the 80x87 exception handler. 
</dd>

<dt><b>Return Value</b></dt> <dd>The floating-point status. 
</dd>

<dt><b>Compatibility</b></dt> <dd>DOS Windows 3.x Phar Lap DOSX Win32 
</dd>

<dt><b>See Also</b></dt> <dd><a href="#_clear87">_clear87</a><br>
<a href="#_control87">_control87</a>
</dd>

<dt><b>Example</b></dt> <dd>See _clear87
</dd>

 </dl>



<br><br><br><br>

</td></table>




<div id="copyright">
Copyright &copy; 1997-2006 by Digital Mars, All Rights Reserved |
Page generated by <a href="http://www.digitalmars.com/d/ddoc.html">Ddoc</a>.
</div>

</body>
</html>

