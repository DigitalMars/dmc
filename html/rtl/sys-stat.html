
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>

<!--
	Copyright (c) 1999-2006 by Digital Mars
	All Rights Reserved
	Written by Walter Bright
	www.digitalmars.com
  -->

<head>
<META http-equiv="content-type" content="text/html; charset=utf-8">
<title>Digital Mars - Runtime Library - sys\stat.h
</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div id="heading">
<a href="http://www.digitalmars.com/" target="_top"><IMG SRC="dmlogo.gif" BORDER=0 WIDTH=270 HEIGHT=53 ALT="www.digitalmars.com"></a>

<a href="http://www.digitalmars.com/" title="www.digitalmars.com">Home</a>
| <a href="../advancedsearch.html" title="Search Digital Mars web site">Search</a>
| <a href="../ctg/ctg.html" title="Compiler & Tools Guide">CTG</a>
| <a href="../rtl/rtl.html" title="Runtime Library Reference">RTL</a>
| <a href="../ugr/ugr.html" title="IDDE Reference">IDDE</a>
| <a href="../stl/index.html" title="Standard Template Library">STL</a>
| <a href="http://www.digitalmars.com/download/freecompiler.html" title="download C & C++ compiler">C/C++ Compiler</a>
| <a href="http://www.digitalmars.com/d/" title="D Programming Language">D</a>

	<div id="lastupdate">Last update Fri Apr 28 16:28:16 2006
</div>
</div>

<!-- Generated by Ddoc from sys-stat.d -->



<table border=1 cellpadding=8 cellspacing=0 frame="void" summary="this table is for layout only">
<tr>
<td valign="top" class="toc" nowrap>
<small>
<center>
<form method="get" action="http://www.google.com/search">
<input id="q" name="q" size="10" value="RTL Search" onFocus='if(this.value == "RTL Search"){this.value="";}'>
<input type="hidden" id="domains" name="domains" value="www.digitalmars.com">
<input type="hidden" id="sitesearch" name="sitesearch" value="www.digitalmars.com/rtl">
<input type="hidden" id="sourceid" name="sourceid" value="google-search">
<input type="submit" id="submit" name="submit" value="Go">
</form>

    <a href="rtl.html"><b>Runtime Library<br>Reference</b></a><br><br>
</center>

    &#183; <a href="constants.html">Constants</a><br>
    &#183; <a href="datatypes.html">Data types</a><br>

<hr><b>Standard C</b><br>

    &#183; <a href="assert.html">assert.h</a><br>
    &#183; <a href="complex.html">complex.h</a><br>
    &#183; <a href="ctype.html" title="character classification">ctype.h</a><br>
    &#183; <a href="fenv.html">fenv.h</a><br>
    &#183; <a href="float.html">float.h</a><br>
    &#183; <a href="locale.html">locale.h</a><br>
    &#183; <a href="math.html" title="math and trig">math.h</a><br>
    &#183; <a href="setjmp.html">setjmp.h</a><br>
    &#183; <a href="signal.html">signal.h</a><br>
    &#183; <a href="stdarg.html">stdarg.h</a><br>
    &#183; <a href="stddef.html">stddef.h</a><br>
    &#183; <a href="stdio.html">stdio.h</a><br>
    &#183; <a href="stdlib.html">stdlib.h</a><br>
    &#183; <a href="string.html">string.h</a><br>
    &#183; <a href="time.html">time.h</a><br>
    <br>

<hr><b>Standard C++</b><br>
    &#183; <a href="iostream.html">IOstream</a><br>
    &#183; <a href="new.html">new</a><br>
    <br>

<hr><b>Win32</b><br>
    &#183; <a href="gc.html" title="Hans Boehm garbage collector">gc.h</a><br>
    <br>

<hr><b>DOS, DOS32, Win16</b><br>
    &#183; <a href="bios.html" title="interface to BIOS API">bios.h</a><br>
    &#183; <a href="cerror.html" title="critical errors">cerror.h</a><br>
    &#183; <a href="disp.html" title="direct access to video display">disp.h</a><br>
    &#183; <a href="dos.html" title="interface to DOS API">dos.h</a><br>
    &#183; <a href="dos2.html">dos.h part 2</a><br>
    &#183; <a href="emm.html" title="expanded memory">emm.h</a><br>
    &#183; <a href="handle.html" title="handle pointers">handle.h</a><br>
    &#183; <a href="int.html" title="interrupt functions">int.h</a><br>
    &#183; <a href="msmouse.html" title="DOS mouse functions">msmouse.h</a><br>
    &#183; <a href="sound.html" title="interface to PC speaker">sound.h</a><br>
    &#183; <a href="swap.html">swap.h</a><br>
    &#183; <a href="tsr.html" title="Terminate Stay Resident functions">tsr.h</a><br>
    &#183; <a href="winio.html" title="Andrew Schulman's winio library">winio.h</a><br>
    <br>

<hr><b>Other C</b><br>
    &#183; <a href="bitops.html" title="access to CPU bit instructions">bitops.h</a><br>
    &#183; <a href="conio.html" title="console I/O">conio.h</a><br>
    &#183; <a href="controlc.html" title="control C">controlc.h</a><br>
    &#183; <a href="direct.html" title="directories">direct.h</a><br>
    &#183; <a href="fltpnt.html">fltpnt.h</a><br>
    &#183; <a href="io.html" title="low level file I/O">io.h</a><br>
    &#183; <a href="page.html" title="suballocate blocks of memory">page.h</a><br>
    &#183; <a href="process.html">process.h</a><br>
    &#183; <a href="search.html">search.h</a><br>
    &#183; <a href="sys-stat.html">sys\stat.h</a><br>
    &#183; <a href="tabsize.html">tabsize.h</a><br>
    &#183; <a href="../ctg/trace.html" title="Trace Dynamic Profiling">trace.h</a><br>
    &#183; <a href="time.html">utime.h</a><br>
    &#183; <a href="unmangle.html">unmangle.h</a><br>
    &#183; <a href="util.html">util.h</a><br>
    <br>

<hr><b>Other C++</b><br>
    &#183; <a href="regexp.html" title="regular expressions">regexp.h</a><br>
    &#183; <a href="oldcomplex.html">class complex</a><br>
    <br>

</small>

<hr>

</td>
<td valign="top">

<h1>sys\stat.h</h1>

<ul>
	<li><a href="#_fstat"><b>_fstat</b></a>
	<li><a href="#_stat"><b>_stat</b></a>
</ul>
<!-- =========================================== -->

<hr> <h2><a name="_fstat">_fstat</a></h2><dl> 

<dt><b>Header</b></dt> <dd>sys\stat.h 
</dd>

<dt><b>Prototype</b></dt> <dd><tt>int _fstat(int fd, struct stat *buf);  
</tt></dd>

<dt><b>Description</b></dt> <dd>The _fstat function gets information about an open file fd and 
stores it in the structure pointed to by buf. Some of the fields in the 
_stat structure are: <p>

<b>Field/Description</b><br>
<dl>
<dt>st_dev 
<dd>Drive number of disk containing file fd or 
value of fd if fd is a device. 
<dt>st_mode 
<dd>Bit map containing mode information on the 
open file. The bits in this mask are described 
in the following table.
<dt>st_nlink 
<dd>Number of links (always 1). 
<dt>st_rdev 
<dd>Same as st_dev. 
<dt>st_size 
<dd>Size of open file in bytes. 
<dt>st_mtime 
<dd>Time last modified. 
<dt>st_atime 
<dd>Same as st_mtime 
<dt>st_ctime 
<dd>Same as st_mtime<p>

<dt>st_mode will be a combination of these values:<p>

<dt><b>Value/Is set if fd refers to...</b>
<dt>_S_IFCHR 
<dd>a character device. 
<dt>_S_IFREG 
<dd>a regular file, not a device. 
<dt>_S_IREAD 
<dd>a readable file or device. 
<dt>_S_IWRITE 
<dd>a wriatable file or device. 
</dl>
</dd>

<dt><b>Synonym</b></dt> <dd>Function: fstat<br>
Structure: stat<br> 
Modes: S_IFCHR, S_IFREG, S_IREAD, S_IWRITE
</dd>

<dt><b>Return Value</b></dt> <dd>A value of 0 if file information is successfully obtained. If the return 
value is -1, errno is set to EBADF indicating a bad file handle. 
</dd>

<dt><b>Compatibility</b></dt> <dd>DOS Windows 3.x Phar Lap DOSX Win32 
</dd>

<dt><b>See Also</b></dt> <dd><a href="#_stat">_stat</a><br>
<a href="#findfirst">findfirst</a><br>
<a href="#findnext">findnext</a><br>
<a href="#_isatty">_isatty</a>
</dd>

<dt><b>Example</b></dt> <dd><pre class="ccode">/* 	Example of _fstat */ 

#include &lt;stdio.h&gt; 
#include &lt;stdlib.h&gt; 
#include &lt;time.h&gt;
#include &lt;string.h&gt; 
#include &lt;fcntl.h&gt;
#include &lt;sys\stat.h&gt; 

void main () 
{   
   char filen[_MAX_PATH]; 
   char *date; 
   int res; 
   struct _stat fstat; 
   int fh; 

   printf (" Enter a filename: "); 
   gets (filen); 

   if ((fh = _open (filen, _O_RDONLY)) &lt; 0) 
   {   
      perror (" Error opening file"); 
      exit (EXIT_FAILURE); 
   } 

   if ((res = _fstat (fh, &fstat)) != 0) 
   {   
      perror (" Failure calling _fstat"); 
      exit (EXIT_FAILURE); 
   } 

   date = asctime (localtime (&amp; fstat. st_ctime)); 
   printf ("\nDate: %s", date); 
   printf (" Mode: %d\n", fstat. st_mode); 
   printf (" Size: %ld\n", fstat. st_size); 
} 
</pre>
</dd>

<dt><b>Output</b></dt> <dd><pre class="console">Enter a filename: _fstat. c
 
Date: Tue Jun 28 14: 11: 56 1994
Mode: -32330
Size: 760
</pre>
</dd>

 </dl>


<!-- =========================================== -->

<hr> <h2><a name="_stat">_stat</a></h2><dl> 

<dt><b>Header</b></dt> <dd>sys/stat.h<br>
sys/types.h
</dd>

<dt><b>Prototype</b></dt> <dd><tt>int _stat(char *path, struct _stat *buf); 
</tt></dd>

<dt><b>Description</b></dt> <dd>The _stat function gets information about a file or directory specified by path and store the information in the structure that buf points to. The structure contains the following fields:<p>
<dl>
<b>Field/Description</b><br>
<dt>st_dev
<dd>The drive number of the drive specified in path, or the default drive, if none is given. 
<dt>st_mode 
<dd>Bit map containing mode information on the open file, made up of the values below. 
<dt>st_nlink 
<dd>Always 1. 
<dt>st_rdev 
<dd>Same as st_dev. 
<dt>st_size 
<dd>Size of file in bytes. 
<dt>st_mtime 
<dd>Time last modified. 
<dt>st_atime 
<dd>For NT, time last accessed; or same as st_mtime. 
<dt>st_ctime 
<dd>For NT, time created; otherwise same as st_mtime. 
<dt>st_ino	
<dd>Always 0. (stat structure only) 
<dt>st_uid	
<dd>Always 0. (stat structure only) 
<dt>st_gid	
<dd>Always 0. (stat structure only) 
</dL><p>

Use the following values for st_mode:<p>
<dl>
<dt>_S_IFREG 
<dd>Set if path refers to an ordinary file, not a directory. 
<dt>_S_IREAD 
<dd>Set if path refers to a readable file or directory. 
<dt>_S_IWRITE 
<dd>Set if path refers to a writable file or directory. 
<dt>_S_IFDIR 
<dd>Set if path refers to a directory. 
<dt>_S_IEXEC 
<dd>Set if path refers to an executable file or a directory. 
</dl>
</dd>

<dt><b>Synonym</b></dt> <dd>Function:  stat<br>
Values: S_IFREG, S_IREAD, S_IWRITE, S_IFDIR, S_IEXEC 
</dd>

<dt><b>Return Value</b></dt> <dd>stat returns 0 if the status information is retrieved. On error the function returns -1 and errno is set. 
</dd>

<dt><b>Compatibility</b></dt> <dd>DOS Windows 3.x Phar Lap DOSX Win32 
</dd>

<dt><b>See Also</b></dt> <dd><a href="#_fstat">_fstat</a>
</dd>

<dt><b>Example</b></dt> <dd><pre class="ccode">/* 	Example of _stat */ 

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt; 
#include &lt;time.h&gt;
#include &lt;string.h&gt; 
#include &lt;sys\stat.h&gt; 

void main ()
{   
    char filen[_MAX_PATH];
    char *date; 
    int res;
    struct _stat fstat; 

    printf (" Enter a filename: ");
    gets (filen); 
    if ((res = _stat (filen, &fstat)) != 0)
    {   
	perror (" Failure calling _stat");
	exit (EXIT_FAILURE); 
    }
    date = asctime (localtime (&amp; fstat. st_ctime)); 
    printf ("\nDate: %s", date); 
    printf (" Mode: %d\n", fstat. st_mode); 
    printf (" Size: %ld\n", fstat. st_size);
} 
</pre>
</dd>

<dt><b>Output</b></dt> <dd><pre class="console">Enter a filename: _stat.c
Date: Thu Jun 23 09: 42: 04 1994
Mode: -32330
Size: 585
</pre>
</dd>

 </dl>



<br><br><br><br>

</td></table>




<div id="copyright">
Copyright &copy; 1997-2006 by Digital Mars, All Rights Reserved |
Page generated by <a href="http://www.digitalmars.com/d/ddoc.html">Ddoc</a>.
</div>

</body>
</html>

