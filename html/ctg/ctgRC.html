
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>

<!--
	Copyright (c) 2001-2006 by Digital Mars
	All Rights Reserved
	www.digitalmars.com
  -->

<head>
<META http-equiv="content-type" content="text/html; charset=utf-8" >
<title>Digital Mars - RC - Resource Compiler
</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div id="heading">
<a href="http://www.digitalmars.com/"><IMG SRC="dmlogo.gif" BORDER=0 WIDTH=270 HEIGHT=53 ALT="www.digitalmars.com"></a>

<a href="http://www.digitalmars.com/" title="www.digitalmars.com">Home</a>
| <a href="../advancedsearch.html" title="Search Digital Mars web site">Search</a>
| <a href="ctg.html" title="Compiler & Tools Guide">CTG</a>
| <a href="../rtl/rtl.html" title="Runtime Library Reference">RTL</a>
| <a href="../ugr/ugr.html" title="IDDE Reference">IDDE</a>
| <a href="../stl/index.html" title="Standard Template Library">STL</a>

	<div id="lastupdate">Last update Fri Apr 28 16:25:47 2006
</div>
</div>

<!-- Generated by Ddoc from ctgRC.d -->




<table border=1 cellpadding=8 cellspacing=0 frame="void" summary="this table is for layout only">
<tr>
<td valign="top" class="toc" nowrap>
<small>
<center>
<form method="get" action="http://www.google.com/search">
<input id="q" name="q" size="10" value="Search" onFocus='if(this.value == "Search"){this.value="";}'>
<input type="hidden" id="domains" name="domains" value="www.digitalmars.com">
<input type="hidden" id="sitesearch" name="sitesearch" value="www.digitalmars.com/ctg">
<input type="hidden" id="sourceid" name="sourceid" value="google-search">
<input type="submit" id="submit" name="submit" value="Go">
</form>
</center>

    <a href="ctg.html"><b>Compiler & Tools Guide</b></a><br>

<hr><b>Compiling</b><br>

    &#149; <a href="ctgCompilingCode.html">Compiling Code</a><br>
    &#149; <a href="C-Language-Implementation.html">C Implementation</a><br>
    &#149; <a href="CPP-Language-Implementation.html">C++ Implementation</a><br>
    &#149; <a href="ctgLanguageImplementation.html">Language Extensions</a><br>
    &#149; <a href="ctgMixingLanguages.html">Mixing Languages</a><br>
    &#149; <a href="ctgAsm.html">Assembly Language</a><br>
    &#149; <a href="ctgInlineAsm.html">Inline Assembler</a><br>
    &#149; <a href="ctgOptimizer.html">Optimizing Code</a><br>
    &#149; <a href="ctgNumerics.html">Numerics Programming</a><br>
    &#149; <a href="regular.html">Regular Expressions</a><br>
    &#149; <a href="acrtused.html">Acrtused</a><br>
    &#149; <a href="pragmas.html">Pragmas</a><br>
    &#149; <a href="precompiled.html">Precompiled Headers</a><br>
    &#149; <a href="predefined.html">Predefined Macros</a><br>
    &#149; <a href="warnings.html">Warning Messages</a><br>
    &#149; <a href="ctgCompilerErrors.html">Error Messages</a><br>
    &#149; <a href="warnings.html#runtime">Runtime Messages</a><br>
    <br>

<hr><b>Linking</b><br>

    &#149; <a href="optlink.html">Optlink</a><br>
    &#149; <a href="ctgLinkSwitches.html">Switches</a><br>
    &#149; <a href="ctgDefFiles.html">Module Definition Files</a><br>
    &#149; <a href="ctgLinkOps.html">Operation and Design</a><br>
    &#149; <a href="OptlinkErrorMessages.html">Error Messages</a><br>
    <br>

<hr><b>Win32 Programming</b><br>

    &#149; <a href="win32programming.html#win32">Win32 Programming</a><br>
    <br>

<hr><b>DOS and Win16<br>Programming</b><br>

    &#149; <a href="ctgMemoryModel.html">Memory Models</a><br>
    &#149; <a href="pointers16.html">16 Bit Pointer Types<br> and Type Modifiers</a><br>
    &#149; <a href="win32programming.html#handle">Handle Pointers</a><br>
    &#149; <a href="win32programming.html#dos">DOS</a><br>
    &#149; <a href="dos32.html">DOS 32 (DOSX)</a><br>
    &#149; <a href="win32programming.html#win16">Win16</a><br>
    &#149; <a href="win32programming.html#win16dll">Win16 DLLs</a><br>
    &#149; <a href="windowspe.html">Win16 Prolog/Epilog</a><br>
    <br>

<hr><b>C/C++ Extensions</b><br>

    &#149; <a href="contract.html">Contract Programming</a><br>
    &#149; <a href="debugstatement.html">__debug statement</a><br>
    &#149; <a href="debugstatement.html#debugdeclaration">__debug declaration</a><br>
    &#149; <a href="trace.html">Dynamic Profiling</a><br>
    &#149; <a href="html.html">Embedding C in HTML</a><br>
    <br>

<hr><b>Tools</b><br>

    &#149; <a href="bcc.html" title="Convert Borland compiler commands">BCC</a><br>
    &#149; <a href="chmod.html" title="Examine and change file attributes">CHMOD</a><br>
    &#149; <a href="cl.html" title="Convert Microsoft compiler commands">CL</a><br>
    &#149; <a href="coff2omf.html" title="Convert COFF .obj and .lib to OMF">COFF2OMF</a><br>
    &#149; <a href="coffimplib.html" title="Convert COFF import library OMF">COFFIMPLIB</a><br>
    &#149; <a href="sc.html" title="Compiler command">DMC</a><br>
    &#149; <a href="diff.html" title="Compare files">DIFF</a><br>
    &#149; <a href="diffdir.html" title="Compare directories">DIFFDIR</a><br>
    &#149; <a href="dump.html" title="Dump files in hex">DUMP</a><br>
    &#149; <a href="dumpobj.html" title="Dump object files in hex">DUMPOBJ</a><br>
    &#149; <a href="dumpexe.html" title="Dump exe files">DUMPEXE</a><br>
    &#149; <a href="exe2bin.html" title="Create .com files">EXE2BIN</a><br>
    &#149; <a href="flpyimg.html" title="Read/Write Floppy Image">FLPYIMG</a><br>
    &#149; <a href="grep.html" title="Search files for string">GREP</a><br>
    &#149; <a href="ctgHelp.html" title="Creating Help Tools">HC</a><br>
    &#149; <a href="implib.html" title="Build import libraries">IMPLIB</a><br>
    &#149; <a href="lib.html" title="Object file librarian">LIB</a><br>
    &#149; <a href="libunres.html" title="Analyze library and object files">LIBUNRES</a><br>
    &#149; <a href="make.html" title="Simple make utility">MAKE</a><br>
    &#149; <a href="makedep.html" title="Update makefile dependencies">MAKEDEP</a><br>
    &#149; <a href="me.html" title="MicroEmacs Text Editor">ME</a><br>
    &#149; <a href="obj2asm.html" title="Object file disassembler">OBJ2ASM</a><br>
    &#149; <a href="patchobj.html" title="Patch object files">PATCHOBJ</a><br>
    &#149; <a href="ctgRC.html" title="Microsoft Resource compiler">RC</a><br>
    &#149; <a href="rcc.html" title="Digital Mars Resource compiler">RCC</a><br>
    &#149; <a href="sc.html" title="Compiler command">SC</a><br>
    &#149; <a href="shell.html" title="Shell scripts">SHELL</a><br>
    &#149; <a href="smake.html" title="Manage complex projects">SMAKE</a><br>
    &#149; <a href="touch.html" title="Set file timestamps">TOUCH</a><br>
    &#149; <a href="unmangle.html" title="Format C++ mangled names">UNMANGLE</a><br>
    &#149; <a href="whereis.html" title="Search for files">WHEREIS</a><br>
    <br>

<hr><b>Porting to DMC++</b><br>

    &#149; <a href="switchtodigitalmars.html">Switching to DMC++</a><br>
    &#149; <a href="switchtodigitalmars.html#microsoft">from Microsoft</a><br>
    &#149; <a href="switchtodigitalmars.html#borland">from Borland</a><br>
    &#149; <a href="ctgPorting.html">Porting Guide</a><br>
    <br>

</small>

<hr>

</td>
<td valign="top">


<h1>Compiling Resources with RC</h1>

This chapter describes the Microsoft Resource Compiler (RC) - a tool that
compiles resources such as icons, cursors, menus, and dialog boxes,
that your application uses. You add the resulting binary resource file to
the application's binary file to produce an 
executable Windows 3.x application. 
<p>

<b>Note:</b> 
	When building a program with the IDDE, it calls 
	Digital Mars' <a href="rcc.html">RCC</a> resource compiler to compile the 
	program's resources (the Symantec linker actually 
	binds the resources to the executable). In contrast, 
	RC both compiles the resources and binds them to 
	the executable.


<h3>What's in This Chapter</h3>

<ul>
	<li> How to include resources in an application. 
	<li> How to create resource scripts. 
	<li> RC command line syntax and options. 
</ul>

<h3>Including Resources in an Application</h3>

To include resources in a Windows 3.x application, follow these 
steps: 

<ol>
	<li> Create individual resource files for cursors, icons, 
	bitmaps, dialogs, and fonts, using the appropriate 
	resource editors. 

	<li> Create a resource script (.rc) file that defines each 
	application resource by specifying its name and 
	description. If the resource is in a separate file, this 
	description includes that file's name. For example, the 
	.rc file might define a cursor resource by naming it 
	SampleCursor, describing it as a resource of type 
	Cursor, and defining it as the cursor contained in the 
	file sample.cur. 

	<li> Compile the resource script file using RC. The result will 
	be a compiled resource file with the file extension .res. 

	<li> Add the compiled resources to the application's 
	compiled executable (.exe) file using RC. You can 
	perform this step and the preceding step with a single RC 
	command. 
</ol>

<h3>Creating a Resource Script File</h3>

After creating individual resource files for the application's icon, 
cursor, bitmap, font, and dialog resources, create a resource 
script file. The resource script file always has the .rc extension and 
is often referred to simply as the .rc file. 
<p>

The resource script file lists every resource in the application and 
describes some types of resources in detail: 

<ul>
	<li> For resources that exist in a separate file, such as icons 
	and cursors, the resource script file simply names the 
	resource and the file that contains it. 

	<li> For some types of resources, such as menus, the entire 
	definition of the resource exists within the resource script 
	file. 
</ul>

Create a resource script file using any ASCII text editor. The 
file can contain resource statements and directives. Resource 
statements name and describe each resource. Directives are a special 
type of statement that define an action you want RC to perform on 
the resource script file before actually compiling it. You can use 
directives to assign values to names, include the contents of files, 
and control compilation of the script file. You use directives in a 
resource script file the same way you use the corresponding C 
language directives. 
<p>

<b>Note:</b> 
	A line in the resource script file cannot exceed 256 
	characters. 


<h3>Using RC</h3>

RC does the following: 

<ul>
	<li> Compiles the resource script file and the resource files, 
	such as icon and cursor files, into a binary resource 
	(.res) file. 

	<li> Combines the compiled resource file with the executable 
	(.exe) file created by the linker. The result is an 
	executable Win16 application. 

	<li> Marks all Win16 applications (even if they have no 
	resources) with a Windows version stamp. 
</ul>

To start RC, use the RC command. What you specify on the 
command line will depend on whether you are compiling resources, 
adding compiled resources to an executable file, or both. For more 
information, see the section "Different Ways to Use the RC 
Command" later in this chapter. 


<h3>RC command syntax</h3>

RC commands have the following form: 

<pre>
	RC [options] [resource-file] [executable-file] 
</pre>

The options are command line options. The resource-file is the name 
of the resource file, and executable-file is the name of the executable 
with which you want to combine resource-file. These command 
parameters are described below. 

<h3>The "options" parameter</h3>

RC options are not case-sensitive. For example, -r and -R are 
equivalent. You can combine single-letter options if they do not 
require any additional parameters. For example, the command: 

<pre>
	RC -R -E -V SAMPLE.RC 
</pre>

is equivalent to the command: 

<pre>
	RC -REV SAMPLE.RC 
</pre>

The options parameter can include one or more of the RC options 
described in the section below. 


<h3>Resource-file parameter</h3>
 
The resource-file parameter specifies the name of the script file that 
contains the names, types, filenames, and descriptions of the 
resources you want to add to the executable file. It can also specify 
the name of a compiled resource file in which case RC adds the 
compiled resources to the executable file. 


<h3>Executable-file parameter</h3>

The executable-file parameter specifies the name of the executable 
file to which the resources should be added. If you do not specify an 
executable file, RC uses the executable file with the same name as 
the script file. 


<h3>RC Options</h3>

This section describes the options you can use with RC. 


<h4>-D</h4> 

Defines a symbol for the preprocessor that you can test with the 
#ifdef directive. 
<p>

You can specify conditional branching in a resource script file based 
on whether or not a term is defined on the RC command line using 
the -D option. For example, suppose your application has a pop-up 
menu, the Debug menu, which you want to appear only during 
debugging. When you compile the application for normal use, the 
Debug menu is not included. Your resource script file contains the 
following statements to define the Debug menu: 


<pre>
	MainMenu MENU
	BEGIN 
	...
	#ifdef DEBUG 
	POPUP &Debug
	    BEGIN 
	    MENUITEM &Memory usage, ID_MEMORY
	    MENUITEM &Walk data heap, ID_WALK_HEAP 
	    END
	#endif 
	END 
</pre>

When compiling resources for a debugging version of the 
application, you include the Debug menu by using the following 
command: 

<pre>
	RC -R -D DEBUG MYAPP.RC 
</pre>

To compile resources for a version of the application that does not 
include the Debug menu, you would use the following command: 

<pre>
	RC -R MYAPP.RC 
</pre>

<h3>Naming files</h3>

These switches let you control how RC names the executable and 
resource files it creates. 

<h4>-FE</h4> 
Names the executable file. 


<h4>-FO</h4> 
Renames the resource file. 
<p>


Normally, RC names the compiled resource file after the resource 
script file and places it in the same directory as the script file. For 
example, when compiling myapp.rc, you would normally type: 


<pre>
	RC -R MYAPP.RC 
</pre>

RC would then create a compiled resource file named myapp.res 
in the same directory as myapp.rc. 
<p>

This option lets you give the resulting resource file a name that 
differs from the corresponding resource script file. For example, to 
name the resulting resource file newfile.res, you could type: 

<pre>
	RC -R -FO NEWFILE.RES MYAPP.RC 
</pre>

You can also use this option to place the resource file in a different 
directory. For example, the following command places the compiled 
resource file myapp.res in the directory C:\RESOURCE: 

<pre>
	RC -R -FO C:\SOURCE\RESOURCE\MYAPP.RES MYAPP.RC 
</pre>

<h3>Choosing the directories that RC searches</h3>

Normally, RC searches for include files and resource files, such as 
icon and cursor files, first in the current directory and then in the 
directories specified by the INCLUDE environment variable. (The 
PATH environment variable has no effect on the directories RC 
searches.) 


<h4>-I</h4> 
Searches the specified directory before searching the directories 
specified by the INCLUDE environment variable. 
<p>

If you use this option, the compiler searches directories in the 
following order: 

<ol>
	<li> The current directory 

	<li> The directory or directories you specify by using the -I 
	option, in the order in which they appear on the 
	command line 

	<li> The list of directories specified by the INCLUDE 
	environment variable, in the order in which the variable 
	lists them, unless you specify the -X option 
</ol>


The following example compiles the resource script file myapp.rc 
and adds the compiled resources to myapp. exe: 

<pre>
	RC -I C:\SOURCE\STUFF -I D:\RESOURCES MYAPP.RC MYAPP.EXE 
</pre>

When compiling the script file, RC searches for include files and 
resource files first in the current directory, then in 
C:\SOURCE\STUFF and D:\RESOURCES, and lastly in the 
directories specified by the INCLUDE environment variable. 


<h4>-X</h4> 
Prevents RC from checking the INCLUDE environment variable 
when searching for include files or resource files. 
<p>

If you use this option, the compiler searches for files in the current 
directory and in any directories you specify using the -I option. The 
following example compiles the resource script file myapp.rc and 
adds the compiled resources to myapp. exe: 

<pre>
	RC -X -I C:\SOURCE\STUFF MYAPP.RC MYAPP.EXE 
</pre>

When compiling the script file, RC searches for include files and 
resource files first in the current directory and then in 
C:\SOURCE\STUFF. 


<h3>Memory utilization</h3>

These options let you specify how your application uses memory. 
<p>

<b>Note:</b> 
	The Memory options have no effect on applications 
	written for Windows 3.1 or later. 

<h4>-E</h4> 
For a DLL, changes the default location of global memory from 
below the EMS bank line to above it. 


<h4>-L</h4> 
Tells Windows that the application uses expanded memory directly, 
according to the Lotus-Intel-Microsoft Expanded Memory 
Specification (EMS), version 2.2. 
<p>

This switch can also be specified as -LIM32. 

<h4>-M</h4> 
Assigns each instance of the application task to a distinct EMS bank, 
when Windows is running with the EMS 4.0 memory configuration. 
By default, all instances of a task share the same EMS bank. 
<p>

This option can also be specified as -MULTINST. 


<h4>-P</h4> 
Creates a private DLL that is called by only one application. This 
allows Windows to use memory more efficiently because only one 
application (or multiple instances of the same application) will be 
calling into the DLL. For example, in the large-frame EMS memory 
model, the DLL is loaded above the EMS bank line, freeing memory 
below the bank line. 


<h4>-T</h4> 
Creates an application that runs only with Windows in protected 
(standard or 386 enhanced) mode. If the user attempts to run the 
application in real mode, Windows displays a message box telling 
the user that the application cannot run in real mode. 


<h3>Optimizing</h3>

This option lets you choose whether RC optimizes your resources for 
preloading. 

<h4>-K</h4> 
Disables RC's load-optimization feature. If this option is not 
specified, the compiler arranges segments and resources in the 
executable file so that all preloaded information is contiguous. This 
feature allows Windows to load the application much more quickly. 
<p>

Without the -K option, all data segments, 
nondiscardable code segments, and the entry-point code segment 
will be preloaded, unless any segment and its relocation information 
exceed 64KB. If the PRELOAD attribute is not assigned to these 
segments in the module-definition (. def) file when you link your 
application, the compiler will add the preload attribute and display a 
warning. Resources and segments will have the same segment 
alignment. This alignment should be as small as possible to prevent 
the final executable file from growing unnecessarily large. You can 
set the alignment using the linker's /alignment option. 


<h3>Compiling resources separately</h3>

This option lets you choose where to place the resources: in a 
resource file or an executable file. 

<h4>-R</h4> 
Creates a resource file from a resource script file. 
<p>

By default, RC adds the compiled resources to the specified 
executable file. Sometimes you might want to compile the resources 
first and then add them to the executable file in separate steps. This 
can be useful if the contents of a resource file will be stable after 
initial development. You can save time by compiling resources 
separately, then adding the compiled resource file to your 
executable file each time you recompile the executable. 
<p>

You can use the -R option to compile the resources separately, 
without adding them to the executable file. When you use this 
option, RC compiles the resource script file and creates a compiled 
resource file. For example, this command reads the resource script 
file sample.rc and creates the compiled resource file 
sample.res: 

<pre>
	RC -R SAMPLE.RC 
</pre>

The command does not add sample.res to the executable file. 


<h3>Displaying progress messages</h3>

<h4>-V</h4> 
Normally, RC does not display messages that report on its progress 
as it compiles. You can, however, tell the compiler to display these 
messages with this option. The following example causes the 
compiler to report on its progress as it compiles the script file 
sample.rc, creates the compiled resource file sample.res, and 
adds the resource file to the executable file sample. exe: 

<pre>
	RC -V SAMPLE.RC 
</pre>

<h3>On-line help</h3>

This option displays on-line help for RC. 


<h4>-H, -?</h4> 
Displays a list of the RC command line options. 


<h3>Different Ways to Use the RC Command</h3>

This section describes the various ways you can use the RC 
command. 


<h3>Compiling a resource script file</h3>

To compile resources separately, use the RC command in the 
following form: 

<pre>
	RC -R options script-file 
</pre>

When you use this form, RC ignores the executable file if you specify 
one. 


<h3>Compiling and adding to an executable</h3>

To compile a resource script file and add the resulting resource file 
to the executable file, use the RC command in the following form: 

<pre>
	RC options script-file executable-file 
</pre>

<h3>Creating a DLL without resources</h3>

To compile a DLL that does not have a resource file, use the RC 
command in the following form: 

<pre>
	RC options dll-file 
</pre>

When you use this form, the DLL filename must explicitly have an 
 .exe, .drv, or .dll extension. 


<h3>Adding resources to an executable</h3>

To add a compiled resource (.res) file to an executable file, use the 
RC command in the following form: 

<pre>
	RC options res-file.RES executable-file 
</pre>


<br><br><br><br>

</td></table>






<div id="copyright">
Copyright &copy; 1999-2006 by Digital Mars, All Rights Reserved |
Page generated by <a href="http://www.digitalmars.com/d/ddoc.html">Ddoc</a>.
</div>

</body>
</html>

