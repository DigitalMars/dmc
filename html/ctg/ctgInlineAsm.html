
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>

<!--
	Copyright (c) 2001-2006 by Digital Mars
	All Rights Reserved
	www.digitalmars.com
  -->

<head>
<META http-equiv="content-type" content="text/html; charset=utf-8" >
<title>Digital Mars - Inline Assembler

</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div id="heading">
<a href="http://www.digitalmars.com/"><IMG SRC="dmlogo.gif" BORDER=0 WIDTH=270 HEIGHT=53 ALT="www.digitalmars.com"></a>

<a href="http://www.digitalmars.com/" title="www.digitalmars.com">Home</a>
| <a href="../advancedsearch.html" title="Search Digital Mars web site">Search</a>
| <a href="ctg.html" title="Compiler & Tools Guide">CTG</a>
| <a href="../rtl/rtl.html" title="Runtime Library Reference">RTL</a>
| <a href="../ugr/ugr.html" title="IDDE Reference">IDDE</a>
| <a href="../stl/index.html" title="Standard Template Library">STL</a>

	<div id="lastupdate">Last update Fri Apr 28 16:25:45 2006
</div>
</div>

<!-- Generated by Ddoc from ctgInlineAsm.d -->




<table border=1 cellpadding=8 cellspacing=0 frame="void" summary="this table is for layout only">
<tr>
<td valign="top" class="toc" nowrap>
<small>
<center>
<form method="get" action="http://www.google.com/search">
<input id="q" name="q" size="10" value="Search" onFocus='if(this.value == "Search"){this.value="";}'>
<input type="hidden" id="domains" name="domains" value="www.digitalmars.com">
<input type="hidden" id="sitesearch" name="sitesearch" value="www.digitalmars.com/ctg">
<input type="hidden" id="sourceid" name="sourceid" value="google-search">
<input type="submit" id="submit" name="submit" value="Go">
</form>
</center>

    <a href="ctg.html"><b>Compiler & Tools Guide</b></a><br>

<hr><b>Compiling</b><br>

    &#149; <a href="ctgCompilingCode.html">Compiling Code</a><br>
    &#149; <a href="C-Language-Implementation.html">C Implementation</a><br>
    &#149; <a href="CPP-Language-Implementation.html">C++ Implementation</a><br>
    &#149; <a href="ctgLanguageImplementation.html">Language Extensions</a><br>
    &#149; <a href="ctgMixingLanguages.html">Mixing Languages</a><br>
    &#149; <a href="ctgAsm.html">Assembly Language</a><br>
    &#149; <a href="ctgInlineAsm.html">Inline Assembler</a><br>
    &#149; <a href="ctgOptimizer.html">Optimizing Code</a><br>
    &#149; <a href="ctgNumerics.html">Numerics Programming</a><br>
    &#149; <a href="regular.html">Regular Expressions</a><br>
    &#149; <a href="acrtused.html">Acrtused</a><br>
    &#149; <a href="pragmas.html">Pragmas</a><br>
    &#149; <a href="precompiled.html">Precompiled Headers</a><br>
    &#149; <a href="predefined.html">Predefined Macros</a><br>
    &#149; <a href="warnings.html">Warning Messages</a><br>
    &#149; <a href="ctgCompilerErrors.html">Error Messages</a><br>
    &#149; <a href="warnings.html#runtime">Runtime Messages</a><br>
    <br>

<hr><b>Linking</b><br>

    &#149; <a href="optlink.html">Optlink</a><br>
    &#149; <a href="ctgLinkSwitches.html">Switches</a><br>
    &#149; <a href="ctgDefFiles.html">Module Definition Files</a><br>
    &#149; <a href="ctgLinkOps.html">Operation and Design</a><br>
    &#149; <a href="OptlinkErrorMessages.html">Error Messages</a><br>
    <br>

<hr><b>Win32 Programming</b><br>

    &#149; <a href="win32programming.html#win32">Win32 Programming</a><br>
    <br>

<hr><b>DOS and Win16<br>Programming</b><br>

    &#149; <a href="ctgMemoryModel.html">Memory Models</a><br>
    &#149; <a href="pointers16.html">16 Bit Pointer Types<br> and Type Modifiers</a><br>
    &#149; <a href="win32programming.html#handle">Handle Pointers</a><br>
    &#149; <a href="win32programming.html#dos">DOS</a><br>
    &#149; <a href="dos32.html">DOS 32 (DOSX)</a><br>
    &#149; <a href="win32programming.html#win16">Win16</a><br>
    &#149; <a href="win32programming.html#win16dll">Win16 DLLs</a><br>
    &#149; <a href="windowspe.html">Win16 Prolog/Epilog</a><br>
    <br>

<hr><b>C/C++ Extensions</b><br>

    &#149; <a href="contract.html">Contract Programming</a><br>
    &#149; <a href="debugstatement.html">__debug statement</a><br>
    &#149; <a href="debugstatement.html#debugdeclaration">__debug declaration</a><br>
    &#149; <a href="trace.html">Dynamic Profiling</a><br>
    &#149; <a href="html.html">Embedding C in HTML</a><br>
    <br>

<hr><b>Tools</b><br>

    &#149; <a href="bcc.html" title="Convert Borland compiler commands">BCC</a><br>
    &#149; <a href="chmod.html" title="Examine and change file attributes">CHMOD</a><br>
    &#149; <a href="cl.html" title="Convert Microsoft compiler commands">CL</a><br>
    &#149; <a href="coff2omf.html" title="Convert COFF .obj and .lib to OMF">COFF2OMF</a><br>
    &#149; <a href="coffimplib.html" title="Convert COFF import library OMF">COFFIMPLIB</a><br>
    &#149; <a href="sc.html" title="Compiler command">DMC</a><br>
    &#149; <a href="diff.html" title="Compare files">DIFF</a><br>
    &#149; <a href="diffdir.html" title="Compare directories">DIFFDIR</a><br>
    &#149; <a href="dump.html" title="Dump files in hex">DUMP</a><br>
    &#149; <a href="dumpobj.html" title="Dump object files in hex">DUMPOBJ</a><br>
    &#149; <a href="dumpexe.html" title="Dump exe files">DUMPEXE</a><br>
    &#149; <a href="exe2bin.html" title="Create .com files">EXE2BIN</a><br>
    &#149; <a href="flpyimg.html" title="Read/Write Floppy Image">FLPYIMG</a><br>
    &#149; <a href="grep.html" title="Search files for string">GREP</a><br>
    &#149; <a href="ctgHelp.html" title="Creating Help Tools">HC</a><br>
    &#149; <a href="implib.html" title="Build import libraries">IMPLIB</a><br>
    &#149; <a href="lib.html" title="Object file librarian">LIB</a><br>
    &#149; <a href="libunres.html" title="Analyze library and object files">LIBUNRES</a><br>
    &#149; <a href="make.html" title="Simple make utility">MAKE</a><br>
    &#149; <a href="makedep.html" title="Update makefile dependencies">MAKEDEP</a><br>
    &#149; <a href="me.html" title="MicroEmacs Text Editor">ME</a><br>
    &#149; <a href="obj2asm.html" title="Object file disassembler">OBJ2ASM</a><br>
    &#149; <a href="patchobj.html" title="Patch object files">PATCHOBJ</a><br>
    &#149; <a href="ctgRC.html" title="Microsoft Resource compiler">RC</a><br>
    &#149; <a href="rcc.html" title="Digital Mars Resource compiler">RCC</a><br>
    &#149; <a href="sc.html" title="Compiler command">SC</a><br>
    &#149; <a href="shell.html" title="Shell scripts">SHELL</a><br>
    &#149; <a href="smake.html" title="Manage complex projects">SMAKE</a><br>
    &#149; <a href="touch.html" title="Set file timestamps">TOUCH</a><br>
    &#149; <a href="unmangle.html" title="Format C++ mangled names">UNMANGLE</a><br>
    &#149; <a href="whereis.html" title="Search for files">WHEREIS</a><br>
    <br>

<hr><b>Porting to DMC++</b><br>

    &#149; <a href="switchtodigitalmars.html">Switching to DMC++</a><br>
    &#149; <a href="switchtodigitalmars.html#microsoft">from Microsoft</a><br>
    &#149; <a href="switchtodigitalmars.html#borland">from Borland</a><br>
    &#149; <a href="ctgPorting.html">Porting Guide</a><br>
    <br>

</small>

<hr>

</td>
<td valign="top">

<h1>Inline Assembler</h1>

	The compiler includes a powerful inline assembler.
	With it,
	assembly language instructions can be used directly in C and C++
	source programs
	without requiring a separate assembler program.
	Assembly language enables optimizing critical functions,
	interfacing to the BIOS, operating system and special hardware,
	and access capabilities of the processor that are 
	not available from C++. 
	<p>

	It supports both 16-bit and 32-bit code generation in all memory 
	models. 

<h2>What's in This Chapter</h2>

<ul>
	<li> Basic features of the inline assembler. 
	<li> The ASM statement and the ASM block. 
	<li> Using ASM registers. 
	<li> Calling C and C++ from assembly language. 
	<li> Registers and opcodes.
</ul>

<h2>Advantages of writing inline assembly language functions</h2>

Use assembly language functions to: 

<ul>
	<li> Create a subroutine that executes as quickly as possible 

	<li> Provide an interface to functions compiled with another 
	compiler

	<li> Acess capabilities of the CPU and the native 
	instruction set that are not available from C++ 

	<li> Interface to specialized hardware

	<li> Write code where specific instruction selection and ordering
	is critical
</ul>

<h3>The asm Statement</h3>

The asm statement invokes the assembler. Use this 
statement wherever a C or C++ statement is legal. You can use asm 
in any of three ways. 
<p>
The first example shows asm followed simply by an assembly 
instruction: 
<pre>
asm mov AH,2
asm mov DL,7 
asm int 21H
</pre>
The second example shows asm followed by a set of assembly 
instructions enclosed by braces. An empty set of braces may follow 
the directive. 
<pre>
asm { 
    mov AH,2
    mov DL,7 
    int 21H
} 
</pre>

Because the asm statement is a statement separator, assembly 
instructions can appear on the same line:
<pre>
asm mov AH,2 asm mov DL,7 asm int 21H 
</pre>

The three previous examples generate identical code. But enclosing 
assembly language in braces, as in the second example, has the 
advantage of setting the assembly language off from the surrounding 
C++ code and avoids repeating the asm statement. 
<p>

No assembler instruction can continue onto a second line. Use the 
form of the last example primarily for writing macros, which must be 
one line long after expansion. 


<h4>Note</h4>
	The Digital Mars C++ asm statement emulates the 
	Borland asm statement. The _asm and __asm 
	statements emulate the Microsoft _asm and __asm 
	statements. 

<h3>The ASM Block</h3>

A series of assembler instructions enclosed by braces following the 
asm keyword are called an "ASM block." 
Unlike C++ blocks, ASM blocks do not affect the scope of variables. 

<h4>Restrictions on using C and C++ in an ASM block</h4>

An ASM block can use the following C and C++ language elements: 

<ul>
	<li> Symbols, including labels, variables, and function names. 

	<li> Constants, including symbolic constants and enum 
	members. 

	<li> Macros and preprocessor directives. 

	<li> Comments delimited by /**/ symbols or defined by // 
	symbols. In Microsoft-compatible mode, semicolons (;) 
	can also be used to delimit comments. 

	<li> Type names (where a MASM type would be legal). 

	<li> Type names, including declarations of structs and 
	pointers. 

	<li> C-style type casts. 
</ul>

<h4>Note</h4>
	Microsoft and Borland inline assemblers do not 
	support type casts. 
<p>

Inline assembly instructions within C or C++ statements can refer to 
C or C++ variables by name. 

<h3>MASM-Style hexadecimal constants</h3>

Support for MASM-style hexadecimal constants provides easy 
conversion of MASM-style source code. The constants take the form: 
<pre>
	digit {hex_digit} ('H'| 'h') 
</pre>
You cannot use hexadecimal constants if the -A (for 
ANSI compatibility) option is used. 

<h3>C and C++ operators in an ASM block</h3>

An ASM block cannot use operators specific to C and C++, such as 
the left-shift (&lt;&lt;) operator. 
<p>
You can use operators common to C, C++, and MASM within an ASM 
block but interpret them as assembly language operators. C and C++ 
interpret brackets ([]) as enclosing array subscripts and scale them 
to the size of an array element. But within an asm statement, C and 
C++ interpret brackets as the MASM index operator, which adds an 
unscaled byte offset to any adjacent operand. 
<p>

In Microsoft-compatible mode, the semicolon delimits 
comments, as in MASM. 


<h3>Assembly language in an asm statement</h3>

In common with other assemblers, the inline assembler accepts any 
instruction that is legal in MASM. The following are some of the 
assembly language features of the asm statement: 

<ul>
	<li> Expressions. Inline assembly code can use any MASM 
	expression. A MASM expression is any combination of 
	operands and operators that evaluates to a single value or 
	address. 

	<li> Data directives and operators. An asm statement can 
	define data objects in the code segment with the MASM 
	directives DB, DW, and DQ. The MASM directives DT, DF, 
	STRUC, and RECORD, and the operators DUP, THIS, 
	WIDTH, and MASK are not accepted. 

	<li> Macros. An asm statement can use C preprocessor macros 
	even though the inline assembler is not a macro 
	assembler and does not support MASM macro directives. 
</ul>

<h3>Other restrictions on C and C++ symbols</h3>

An asm statement can reference any C or C++ variable name, 
function, or label in scope, provided those names are not symbolic 
constants. However, you cannot call a C++ member function from 
within an asm statement. 
<p>
Prototype the functions referenced in an asm statement before 
using them in programs. This lets the compiler distinguish them from 
names and labels. 
<p>
Each assembly language instruction can contain a single C or C++ 
symbol. 
<p>
C or C++ symbols within an ASM block must not have the same 
spelling as an asm reserved word. 
<p>
The inline assembler allows structure or union tags in asm 
statements, but only as qualifiers of references to members of the 
structure or union. 


<h3>Accessing C or C++ data in an asm statement</h3>

In general, instructions in an asm statement can reference any 
symbol in scope where the statement appears. The following 
statement loads the AX register with the value of var, a C variable in 
scope: 
<pre>
	asm mov AX,var
</pre>
An asm statement can reference a uniquely named member of a 
class, structure, or union without specifying the variable name or 
type before the period operator. But if the member name is not 
unique, you must specify a variable or type name before the period 
operator. If two structure types have a member name in common, as 
in this example: 
<pre>
	struct first_type
	{ 
	    char *mold;
	    int common_name; 
	};

	struct second__type
	{ 
	    char *mildew;
	    long common_name; 
	    int unique_name;
	}; 
</pre>
then qualify the reference to <i>common_name</i> with the tag name:
<pre>
	asm mov [bx]first_type.common_name,10 
</pre>
You need not qualify a reference to a unique member name. In the 
following example, unique_name is an anonymous structure 
member because it is a member of first_type. 
<pre>
	asm mov [bx].unique_name,10 
</pre>
This statement generates the same instruction whether or not a 
qualifying name or type is present. For more information, see the 
section "Making anonymous references to structure members" later 
in this chapter. 


<h3>Functions in inline assembly language</h3>

Because ASM blocks do not require separate source file assembly 
steps, writing a function using ASM blocks is easier than using a 
separate assembler. In addition, the compiler generates function 
prolog and epilog code. 
<p>

The expon2 function is an example of a function written in inline 
assembly language: 
<pre>
	int expon2(int num, int power)
	{
	    asm 
	    {	mov AX,num	// get first argument 
		mov CX,power	// get second argument
		shl AX,CL	// AX = AX * (2 to the power of CL) 
	    }
	} 
</pre>
An inline function refers to its arguments by name and may appear 
in the same source file as the callers of the function. 
<p>
Refer to <a href="ctgAsm.html">Using Assembly Language Functions</a>
for a description of the register 
stacks used by inline assembly instructions. 


<h3>Making anonymous references to structure members</h3>

You can make anonymous references to members of a given 
structure, as in the following: 
<pre>
	struct x {
	    int i; 
	    int j;
	    int k; 
	} foo; 
</pre>
You can refer to these members i, j, and k anonymously, for 
example, with the assembly instruction: 
<pre>
	asm
	{   mov BX,4 
	    mov AX,foo[BX]; Refers to member j of foo
	} 
</pre>

<h3>Using register variables</h3>

Digital Mars C++ supports register variables. Register variables are 
useful with inline assembly. If asm statements place results in 
registers, you can use register variables to access those values. 
<p>
For more information see "Using Register Variables" in Chapter 5, 
"Using Assembly Language Functions." 


<h3>Using the __LOCAL_SIZE symbol</h3>

When using the inline assembler, the special symbol 
__LOCAL_SIZE expands to the number of bytes used by all local 
symbols. __LOCAL_SIZE is useful in combination with 
__declspec(naked), as __LOCAL_SIZE is the amount of space 
to reserve on the stack. 
<p>
For example: 
<pre>
	__declspec(naked) int test()
	{
	    int x, y, z; 

	    _asm
	    {	push BP 
		mov BP,SP
		sub SP,__LOCAL_SIZE 
		mov BX,__LOCAL_SIZE[BP]
		mov BX,__LOCAL_SIZE+2[BP] 
		mov AX,__LOCAL_SIZE
		mov AX,__LOCAL_SIZE+2 
	    }
	    _AX = x + y + z; 
	    _asm
	    { 
		mov SP,BP
		pop BP 
		ret
	    } 
	} 
</pre>

<h3>Using ASM Registers</h3>

The asm statement alters the registers outside the programmer's 
explicit assembly language instructions. Registers contain whatever 
values the normal control flow leaves in them at the point of the asm 
statement. 


<h3>For 16-bit memory models</h3>

You do not need to preserve the following registers when writing 
inline assembly language: AX, BX, CX, DX, SI, DI, ES, and flags 
(other than DF). 
<p>
C and C++ do not expect these registers to be maintained between 
statements, but they do preserve the following registers: CS, DS, SS, 
SP and BP. 
<p>

<h4>Note</h4>
	The compiler does not use registers to hold register 
	variables for functions containing inline assembly 
	code. 

<h3>For 32-bit memory models</h3>

Functions can change the values in the EAX, ECX, EDX, ESI, EDI 
registers. 
<p>
Functions must preserve the values in the EBX, ESI, EDI, EBP, ESP, 
SS, CS, DS registers (plus ES and GS for the NT memory model). 
<p>
Always set the direction flag to forward. 
<p>
To maximize speed on 32-bit buses, make sure data aligns along 32-Function 
return values 

<ul>
	<li> For 16-bit models. If the return value for a function is 
short (a char, int, or near pointer) store it in the AX 
register, as in the previous example, expon2. If the 
return value is long, store the high word in the DX 
register and the low word in AX. To return a longer value, 
store the value in memory and return a pointer to the 
value. 

	<li> For 32-bit models. Return near pointers, ints, 
unsigned ints, chars, shorts, longs and 
unsigned longs in EAX. 32-bit models return far 
pointers in EDX, EAX, where EDX contains the segment 
and EAX contains the offset. 

	<li> When C linkage is in effect. Floats are returned in EAX 
and doubles in EDX, EAX, where EDX contains the most 
significant 32 bits and EAX the least significant. 

	<li> When C++ linkage is in effect. The compiler creates a 
temporary copy on the stack and returns a pointer to it. 
</ul>

<h3>Function return values</h3>

<ul>
	<li> For 16-bit memory models. If the return value for a 
function is short (a char, int, or near pointer) store it in 
the AX register, as in the previous example, expon2. If 
the return value is long, store the high word in the DX 
register and the low word in AX. To return a longer value, 
store the value in memory and return a pointer to the 
value. 

	<li> For 32-bit models. Return near pointers, ints, unsigned 
ints, chars, shorts, longs, and unsigned longs in 
EAX. 32-bit models return far pointers in EDX, EAX, where 
EDX contains the segment and EAX contains the offset. 

	<li> When C linkage is in effect. Floats are returned in EAX 
and doubles in EDX, EAX, where EDX contains the most 
significant 32 bits and EAX the least significant. 

	<li> When C++ linkage is in effect. The compiler creates a 
temporary copy on the stack and returns a pointer to it. 

</ul>

<h3>Interfacing to a member function</h3>

The easiest way to interface an assembly language routine to a class 
member function is to provide a C wrapper function that can be 
called from the assembly language routine. 
<p>
An alternative is to write the member function in C++ and compile it 
with normal out-of-line member functions. 


<h3>Calling C Functions from an ASM Block</h3>

C functions, including C library functions, can be called from within 
the asm block, as in the following example: 
<pre>
	#include &lt;stdio.h&gt; 
	char format [] = "% s %s %s \n";
	char alas[] = "Alas,"; 
	char poor[] = "poor";
	char Yorick[] = "Yorick!"; 

	void main(void) 
	{
	    asm 
	    {	mov	AX, offset Yorick 
		push	AX
		mov	AX, offset poor 
		push	AX
		mov	AX, offset Alas 
		push	AX
		mov	AX, offset format 
		push	AX
		call	printf 
	    }
	} 
</pre>

Simply push the needed arguments from right to left before calling 
the function, since function arguments are passed on the stack. To 
print the message, the example pushes pointers to the three strings, 
formats them, and then calls printf. 


<h3>Calling C++ functions</h3>

An ASM block can call only global C++ functions that are not 
overloaded because the types of the arguments are unknown. The 
compiler issues an error if an ASM block calls an overloaded global 
C++ function or a C member function. 
<p>

You can also call a function declared with extern "C" linkage from 
an asm statement within a C++ program, because all the standard 
header files declare the library functions to have extern "C" 
linkage. 


<h3>Defining ASM blocks as C macros</h3>

A C++ macro is a convenient way to insert assembly language into 
source code. But, because a macro expands into a single, logical 
line, take care when writing them. 
<p>

If the macro expands into multiple instructions, enclose the 
instructions in an ASM block. The asm statement must precede each 
instruction. Also separate comments from code with /**/ characters 
rather than //. Unless you take these precautions, the compiler can 
be confused by C or C++ statements to the left or right of the 
assembly code or interpret instructions as comments when the 
macro becomes a single line. Without the closing brace, the compiler 
cannot tell where the assembly language ends. 
<p>

<b>Warning</b>: Do not use double-slash (//) characters within a 
macro. The compiler terminates the macro when it 
sees a double-slash. 
<p>

An ASM block written as a macro can accept arguments but, unlike a 
C macro, it cannot return values. But some MASM macros can be 
written as macros for C. The following MASM macro sets a video 
page to the value specified in the argument page: 
<pre>
	findpage MACRO page
		mov AH, 5 
		MOV AL,page
		int 10h 
		ENDM 
</pre>
The following C macro does the same thing: 
<pre>
	#define findpage(page) asm \
	{ \
	    asm mov AH,5 \
	    asm mov AL,page \
	    asm int 10h \
	} 
</pre>

<h2>Registers</h2>

	The following registers are supported. Register names
	are in upper or lower case.

	<dl><dl>
	<dt><b>AL</b>, <b>AH</b>, <b>AX</b>, <b>EAX</b>
	<dt><b>BL</b>, <b>BH</b>, <b>BX</b>, <b>EBX</b>
	<dt><b>CL</b>, <b>CH</b>, <b>CX</b>, <b>ECX</b>
	<dt><b>DL</b>, <b>DH</b>, <b>DX</b>, <b>EDX</b>
	<dt><b>BP</b>, <b>EBP</b>
	<dt><b>SP</b>, <b>ESP</b>
	<dt><b>DI</b>, <b>EDI</b>
	<dt><b>SI</b>, <b>ESI</b>
	<dt><b>ES</b>, <b>CS</b>, <b>SS</b>, <b>DS</b>, <b>GS</b>, <b>FS</b>
	<dt><b>CR0</b>, <b>CR2</b>, <b>CR3</b>, <b>CR4</b>
	<dt><b>DR0</b>, <b>DR1</b>, <b>DR2</b>, <b>DR3</b>, <b>DR6</b>, <b>DR7</b>
	<dt><b>TR3</b>, <b>TR4</b>, <b>TR5</b>, <b>TR6</b>, <b>TR7</b>
	<dt><b>ST</b>
	<dt><b>ST(0)</b>, <b>ST(1)</b>, <b>ST(2)</b>, <b>ST(3)</b>,
	    <b>ST(4)</b>, <b>ST(5)</b>, <b>ST(6)</b>, <b>ST(7)</b>
	<dt><b>MM0</b>, <b>MM1</b>, <b>MM2</b>, <b>MM3</b>,
	    <b>MM4</b>, <b>MM5</b>, <b>MM6</b>, <b>MM7</b>
	<dt><b>XMM0</b>, <b>XMM1</b>, <b>XMM2</b>, <b>XMM3</b>,
	    <b>XMM4</b>, <b>XMM5</b>, <b>XMM6</b>, <b>XMM7</b>
	</dl></dl>

<h2>Opcodes</h2>

	The following instructions are supported. Opcode names
	are in upper or lower case.

	<table border=1 cellpadding=4 cellspacing=0>
	<tr>
  	<td>aaa</td>
  	<td>aad</td>
  	<td>aam</td>
  	<td>aas</td>
  	<td>adc</td>
	</tr><tr>
  	<td>add</td>
  	<td>addpd</td>
  	<td>addps</td>
  	<td>addsd</td>
  	<td>addss</td>
	</tr><tr>
  	<td>and</td>
  	<td>andnpd</td>
  	<td>andnps</td>
  	<td>andpd</td>
  	<td>andps</td>
	</tr><tr>
  	<td>arpl</td>
  	<td>bound</td>
  	<td>bsf</td>
  	<td>bsr</td>
  	<td>bswap</td>
	</tr><tr>
  	<td>bt</td>
  	<td>btc</td>
  	<td>btr</td>
  	<td>bts</td>
  	<td>call</td>
	</tr><tr>
  	<td>cbw</td>
  	<td>cdq</td>
  	<td>clc</td>
  	<td>cld</td>
	<td>clflush</td>
	</tr><tr>
  	<td>cli</td>
  	<td>clts</td>
  	<td>cmc</td>
  	<td>cmova</td>
  	<td>cmovae</td>
	</tr><tr>
  	<td>cmovb</td>
  	<td>cmovbe</td>
  	<td>cmovc</td>
  	<td>cmove</td>
  	<td>cmovg</td>
	</tr><tr>
  	<td>cmovge</td>
  	<td>cmovl</td>
  	<td>cmovle</td>
  	<td>cmovna</td>
  	<td>cmovnae</td>
	</tr><tr>
  	<td>cmovnb</td>
  	<td>cmovnbe</td>
  	<td>cmovnc</td>
  	<td>cmovne</td>
  	<td>cmovng</td>
	</tr><tr>
  	<td>cmovnge</td>
  	<td>cmovnl</td>
  	<td>cmovnle</td>
  	<td>cmovno</td>
  	<td>cmovnp</td>
	</tr><tr>
  	<td>cmovns</td>
  	<td>cmovnz</td>
  	<td>cmovo</td>
  	<td>cmovp</td>
  	<td>cmovpe</td>
	</tr><tr>
  	<td>cmovpo</td>
  	<td>cmovs</td>
  	<td>cmovz</td>
  	<td>cmp</td>
  	<td>cmppd</td>
	</tr><tr>
  	<td>cmpps</td>
  	<td>cmps</td>
  	<td>cmpsb</td>
  	<td>cmpsd</td>
  	<td>cmpss</td>
	</tr><tr>
  	<td>cmpsw</td>
  	<td>cmpxch8b</td>
  	<td>cmpxchg</td>
  	<td>comisd</td>
  	<td>comiss</td>
	</tr><tr>
  	<td>cpuid</td>
	<td>cvtdq2pd</td>
	<td>cvtdq2ps</td>
	<td>cvtpd2dq</td>
	<td>cvtpd2pi</td>
	</tr><tr>
	<td>cvtpd2ps</td>
	<td>cvtpi2pd</td>
	<td>cvtpi2ps</td>
	<td>cvtps2dq</td>
	<td>cvtps2pd</td>
	</tr><tr>
	<td>cvtps2pi</td>
	<td>cvtsd2si</td>
	<td>cvtsd2ss</td>
	<td>cvtsi2sd</td>
	<td>cvtsi2ss</td>
	</tr><tr>
	<td>cvtss2sd</td>
	<td>cvtss2si</td>
	<td>cvttpd2dq</td>
	<td>cvttpd2pi</td>
	<td>cvttps2dq</td>
	</tr><tr>
	<td>cvttps2pi</td>
	<td>cvttsd2si</td>
	<td>cvttss2si</td>
  	<td>cwd</td>
  	<td>cwde</td>
	</tr><tr>
  	<td>da</td>
  	<td>daa</td>
  	<td>das</td>
  	<td>db</td>
  	<td>dd</td>
	</tr><tr>
  	<td>de</td>
  	<td>dec</td>
  	<td>df</td>
  	<td>di</td>
  	<td>div</td>
	</tr><tr>
	<td>divpd</td>
	<td>divps</td>
	<td>divsd</td>
	<td>divss</td>
  	<td>dl</td>
	</tr><tr>
  	<td>dq</td>
  	<td>ds</td>
  	<td>dt</td>
  	<td>dw</td>
	<td>emms</td>
	</tr><tr>
  	<td>enter</td>
  	<td>f2xm1</td>
  	<td>fabs</td>
  	<td>fadd</td>
  	<td>faddp</td>
	</tr><tr>
  	<td>fbld</td>
  	<td>fbstp</td>
  	<td>fchs</td>
  	<td>fclex</td>
  	<td>fcmovb</td>
	</tr><tr>
  	<td>fcmovbe</td>
  	<td>fcmove</td>
  	<td>fcmovnb</td>
  	<td>fcmovnbe</td>
  	<td>fcmovne</td>
	</tr><tr>
  	<td>fcmovnu</td>
  	<td>fcmovu</td>
  	<td>fcom</td>
  	<td>fcomi</td>
  	<td>fcomip</td>
	</tr><tr>
  	<td>fcomp</td>
  	<td>fcompp</td>
  	<td>fcos</td>
  	<td>fdecstp</td>
  	<td>fdisi</td>
	</tr><tr>
  	<td>fdiv</td>
  	<td>fdivp</td>
  	<td>fdivr</td>
  	<td>fdivrp</td>
  	<td>feni</td>
	</tr><tr>
  	<td>ffree</td>
  	<td>fiadd</td>
  	<td>ficom</td>
  	<td>ficomp</td>
  	<td>fidiv</td>
	</tr><tr>
  	<td>fidivr</td>
  	<td>fild</td>
  	<td>fimul</td>
  	<td>fincstp</td>
  	<td>finit</td>
	</tr><tr>
  	<td>fist</td>
  	<td>fistp</td>
  	<td>fisub</td>
  	<td>fisubr</td>
  	<td>fld</td>
	</tr><tr>
  	<td>fld1</td>
  	<td>fldcw</td>
  	<td>fldenv</td>
  	<td>fldl2e</td>
  	<td>fldl2t</td>
	</tr><tr>
  	<td>fldlg2</td>
  	<td>fldln2</td>
  	<td>fldpi</td>
  	<td>fldz</td>
  	<td>fmul</td>
	</tr><tr>
  	<td>fmulp</td>
  	<td>fnclex</td>
  	<td>fndisi</td>
  	<td>fneni</td>
  	<td>fninit</td>
	</tr><tr>
  	<td>fnop</td>
  	<td>fnsave</td>
  	<td>fnstcw</td>
  	<td>fnstenv</td>
  	<td>fnstsw</td>
	</tr><tr>
  	<td>fpatan</td>
  	<td>fprem</td>
  	<td>fprem1</td>
  	<td>fptan</td>
  	<td>frndint</td>
	</tr><tr>
  	<td>frstor</td>
  	<td>fsave</td>
  	<td>fscale</td>
  	<td>fsetpm</td>
  	<td>fsin</td>
	</tr><tr>
  	<td>fsincos</td>
  	<td>fsqrt</td>
  	<td>fst</td>
  	<td>fstcw</td>
  	<td>fstenv</td>
	</tr><tr>
  	<td>fstp</td>
  	<td>fstsw</td>
  	<td>fsub</td>
  	<td>fsubp</td>
  	<td>fsubr</td>
	</tr><tr>
  	<td>fsubrp</td>
  	<td>ftst</td>
  	<td>fucom</td>
  	<td>fucomi</td>
  	<td>fucomip</td>
	</tr><tr>
  	<td>fucomp</td>
  	<td>fucompp</td>
  	<td>fwait</td>
  	<td>fxam</td>
  	<td>fxch</td>
	</tr><tr>
	<td>fxrstor</td>
	<td>fxsave</td>
  	<td>fxtract</td>
  	<td>fyl2x</td>
  	<td>fyl2xp1</td>
	</tr><tr>
  	<td>hlt</td>
  	<td>idiv</td>
  	<td>imul</td>
  	<td>in</td>
  	<td>inc</td>
	</tr><tr>
  	<td>ins</td>
  	<td>insb</td>
  	<td>insd</td>
  	<td>insw</td>
  	<td>int</td>
	</tr><tr>
  	<td>into</td>
  	<td>invd</td>
  	<td>invlpg</td>
  	<td>iret</td>
  	<td>iretd</td>
	</tr><tr>
  	<td>ja</td>
  	<td>jae</td>
  	<td>jb</td>
  	<td>jbe</td>
  	<td>jc</td>
	</tr><tr>
  	<td>jcxz</td>
  	<td>je</td>
  	<td>jecxz</td>
  	<td>jg</td>
  	<td>jge</td>
	</tr><tr>
  	<td>jl</td>
  	<td>jle</td>
  	<td>jmp</td>
  	<td>jna</td>
  	<td>jnae</td>
	</tr><tr>
  	<td>jnb</td>
  	<td>jnbe</td>
  	<td>jnc</td>
  	<td>jne</td>
  	<td>jng</td>
	</tr><tr>
  	<td>jnge</td>
  	<td>jnl</td>
  	<td>jnle</td>
  	<td>jno</td>
  	<td>jnp</td>
	</tr><tr>
  	<td>jns</td>
  	<td>jnz</td>
  	<td>jo</td>
  	<td>jp</td>
  	<td>jpe</td>
	</tr><tr>
  	<td>jpo</td>
  	<td>js</td>
  	<td>jz</td>
  	<td>lahf</td>
  	<td>lar</td>
	</tr><tr>
	<td>ldmxcsr</td>
  	<td>lds</td>
  	<td>lea</td>
  	<td>leave</td>
  	<td>les</td>
	</tr><tr>
	<td>lfence</td>
  	<td>lfs</td>
  	<td>lgdt</td>
  	<td>lgs</td>
  	<td>lidt</td>
	</tr><tr>
  	<td>lldt</td>
  	<td>lmsw</td>
	<td>lock</td>
  	<td>lods</td>
  	<td>lodsb</td>
	</tr><tr>
  	<td>lodsd</td>
  	<td>lodsw</td>
  	<td>loop</td>
  	<td>loope</td>
  	<td>loopne</td>
	</tr><tr>
  	<td>loopnz</td>
  	<td>loopz</td>
  	<td>lsl</td>
  	<td>lss</td>
  	<td>ltr</td>
	</tr><tr>
	<td>maskmovdqu</td>
	<td>maskmovq</td>
	<td>maxpd</td>
	<td>maxps</td>
	<td>maxsd</td>
	</tr><tr>
	<td>maxss</td>
	<td>mfence</td>
	<td>minpd</td>
	<td>minps</td>
	<td>minsd</td>
	</tr><tr>
	<td>minss</td>
  	<td>mov</td>
	<td>movapd</td>
	<td>movaps</td>
  	<td>movd</td>
	</tr><tr>
	<td>movdq2q</td>
	<td>movdqa</td>
	<td>movdqu</td>
	<td>movhlps</td>
	<td>movhpd</td>
	</tr><tr>
	<td>movhps</td>
	<td>movlhps</td>
	<td>movlpd</td>
	<td>movlps</td>
	<td>movmskpd</td>
	</tr><tr>
	<td>movmskps</td>
	<td>movntdq</td>
	<td>movnti</td>
	<td>movntpd</td>
	<td>movntps</td>
	</tr><tr>
	<td>movntq</td>
  	<td>movq</td>
	<td>movq2dq</td>
  	<td>movs</td>
  	<td>movsb</td>
	</tr><tr>
  	<td>movsd</td>
	<td>movss</td>
  	<td>movsw</td>
  	<td>movsx</td>
	<td>movupd</td>
	</tr><tr>
	<td>movups</td>
  	<td>movzx</td>
  	<td>mul</td>
	<td>mulpd</td>
	<td>mulps</td>
	</tr><tr>
	<td>mulsd</td>
	<td>mulss</td>
  	<td>neg</td>
  	<td>nop</td>
  	<td>not</td>
	</tr><tr>
  	<td>or</td>
	<td>orpd</td>
	<td>orps</td>
  	<td>out</td>
  	<td>outs</td>
	</tr><tr>
  	<td>outsb</td>
  	<td>outsd</td>
  	<td>outsw</td>
	<td>packssdw</td>
	<td>packsswb</td>
	</tr><tr>
	<td>packuswb</td>
	<td>paddb</td>
	<td>paddd</td>
	<td>paddq</td>
	<td>paddsb</td>
	</tr><tr>
	<td>paddsw</td>
	<td>paddusb</td>
	<td>paddusw</td>
	<td>paddw</td>
	<td>pand</td>
	</tr><tr>
	<td>pandn</td>
	<td>pavgb</td>
	<td>pavgw</td>
	<td>pcmpeqb</td>
	<td>pcmpeqd</td>
	</tr><tr>
	<td>pcmpeqw</td>
	<td>pcmpgtb</td>
	<td>pcmpgtd</td>
	<td>pcmpgtw</td>
	<td>pextrw</td>
	</tr><tr>
	<td>pinsrw</td>
	<td>pmaddwd</td>
	<td>pmaxsw</td>
	<td>pmaxub</td>
	<td>pminsw</td>
	</tr><tr>
	<td>pminub</td>
	<td>pmovmskb</td>
	<td>pmulhuw</td>
	<td>pmulhw</td>
	<td>pmullw</td>
	</tr><tr>
	<td>pmuludq</td>
  	<td>pop</td>
  	<td>popa</td>
  	<td>popad</td>
  	<td>popf</td>
	</tr><tr>
  	<td>popfd</td>
	<td>por</td>
	<td>prefetchnta</td>
	<td>prefetcht0</td>
	<td>prefetcht1</td>
	</tr><tr>
	<td>prefetcht2</td>
	<td>psadbw</td>
	<td>pshufd</td>
	<td>pshufhw</td>
	<td>pshuflw</td>
	</tr><tr>
	<td>pshufw</td>
	<td>pslld</td>
	<td>pslldq</td>
	<td>psllq</td>
	<td>psllw</td>
	</tr><tr>
	<td>psrad</td>
	<td>psraw</td>
	<td>psrld</td>
	<td>psrldq</td>
	<td>psrlq</td>
	</tr><tr>
	<td>psrlw</td>
	<td>psubb</td>
	<td>psubd</td>
	<td>psubq</td>
	<td>psubsb</td>
	</tr><tr>
	<td>psubsw</td>
	<td>psubusb</td>
	<td>psubusw</td>
	<td>psubw</td>
	<td>punpckhbw</td>
	</tr><tr>
	<td>punpckhdq</td>
	<td>punpckhqdq</td>
	<td>punpckhwd</td>
	<td>punpcklbw</td>
	<td>punpckldq</td>
	</tr><tr>
	<td>punpcklqdq</td>
	<td>punpcklwd</td>
  	<td>push</td>
  	<td>pusha</td>
  	<td>pushad</td>
	</tr><tr>
  	<td>pushf</td>
  	<td>pushfd</td>
	<td>pxor</td>
  	<td>rcl</td>
	<td>rcpps</td>
	</tr><tr>
	<td>rcpss</td>
  	<td>rcr</td>
  	<td>rdmsr</td>
	<td>rdpmc</td>
  	<td>rdtsc</td>
	</tr><tr>
  	<td>rep</td>
  	<td>repe</td>
  	<td>repne</td>
  	<td>repnz</td>
  	<td>repz</td>
	</tr><tr>
  	<td>ret</td>
  	<td>retf</td>
  	<td>rol</td>
  	<td>ror</td>
  	<td>rsm</td>
	</tr><tr>
	<td>rsqrtps</td>
	<td>rsqrtss</td>
  	<td>sahf</td>
  	<td>sal</td>
  	<td>sar</td>
	</tr><tr>
  	<td>sbb</td>
  	<td>scas</td>
  	<td>scasb</td>
  	<td>scasd</td>
  	<td>scasw</td>
	</tr><tr>
  	<td>seta</td>
  	<td>setae</td>
  	<td>setb</td>
  	<td>setbe</td>
  	<td>setc</td>
	</tr><tr>
  	<td>sete</td>
  	<td>setg</td>
  	<td>setge</td>
  	<td>setl</td>
  	<td>setle</td>
	</tr><tr>
  	<td>setna</td>
  	<td>setnae</td>
  	<td>setnb</td>
  	<td>setnbe</td>
  	<td>setnc</td>
	</tr><tr>
  	<td>setne</td>
  	<td>setng</td>
  	<td>setnge</td>
  	<td>setnl</td>
  	<td>setnle</td>
	</tr><tr>
  	<td>setno</td>
  	<td>setnp</td>
  	<td>setns</td>
  	<td>setnz</td>
  	<td>seto</td>
	</tr><tr>
  	<td>setp</td>
  	<td>setpe</td>
  	<td>setpo</td>
  	<td>sets</td>
  	<td>setz</td>
	</tr><tr>
	<td>sfence</td>
  	<td>sgdt</td>
  	<td>shl</td>
  	<td>shld</td>
  	<td>shr</td>
	</tr><tr>
  	<td>shrd</td>
	<td>shufpd</td>
	<td>shufps</td>
  	<td>sidt</td>
  	<td>sldt</td>
	</tr><tr>
  	<td>smsw</td>
	<td>sqrtpd</td>
	<td>sqrtps</td>
	<td>sqrtsd</td>
	<td>sqrtss</td>
	</tr><tr>
  	<td>stc</td>
  	<td>std</td>
  	<td>sti</td>
	<td>stmxcsr</td>
  	<td>stos</td>
	</tr><tr>
  	<td>stosb</td>
  	<td>stosd</td>
  	<td>stosw</td>
  	<td>str</td>
  	<td>sub</td>
	</tr><tr>
	<td>subpd</td>
	<td>subps</td>
	<td>subsd</td>
	<td>subss</td>
	<td>sysenter</td>
	</tr><tr>
	<td>sysexit</td>
  	<td>test</td>
	<td>ucomisd</td>
	<td>ucomiss</td>
	<td>ud2</td>
	</tr><tr>
	<td>unpckhpd</td>
	<td>unpckhps</td>
	<td>unpcklpd</td>
	<td>unpcklps</td>
  	<td>verr</td>
	</tr><tr>
  	<td>verw</td>
  	<td>wait</td>
  	<td>wbinvd</td>
  	<td>wrmsr</td>
  	<td>xadd</td>
	</tr><tr>
  	<td>xchg</td>
  	<td>xlat</td>
  	<td>xlatb</td>
  	<td>xor</td>
	<td>xorpd</td>
	</tr><tr>
	<td>xorps</td>
	<td> </td>
	<td> </td>
	<td> </td>
	</tr>

	</table>

<h3>Pentium 4 (Prescott) Opcodes Supported</h3>

	<table border=1 cellpadding=4 cellspacing=0>
	<tr>
	<td>addsubpd</td>
	<td>addsubps</td>
  	<td>fisttp</td>
	<td>haddpd</td>
	<td>haddps</td>
	</tr><tr>
	<td>hsubpd</td>
	<td>hsubps</td>
	<td>lddqu</td>
	<td>monitor</td>
	<td>movddup</td>
	</tr><tr>
	<td>movshdup</td>
	<td>movsldup</td>
	<td>mwait</td>
	<td> </td>
	<td> </td>

	</tr>
	</table>

<h3>AMD Opcodes</h3>

	<table border=1 cellpadding=4 cellspacing=0>
	<tr>
	<td>pavgusb</td>
	<td>pf2id</td>
	<td>pfacc</td>
	<td>pfadd</td>
	<td>pfcmpeq</td>
	</tr><tr>
	<td>pfcmpge</td>
	<td>pfcmpgt</td>
	<td>pfmax</td>
	<td>pfmin</td>
	<td>pfmul</td>
	</tr><tr>
	<td>pfnacc</td>
	<td>pfpnacc</td>
	<td>pfrcp</td>
	<td>pfrcpit1</td>
	<td>pfrcpit2</td>
	</tr><tr>
	<td>pfrsqit1</td>
	<td>pfrsqrt</td>
	<td>pfsub</td>
	<td>pfsubr</td>
	<td>pi2fd</td>
	</tr><tr>
	<td>pmulhrw</td>
	<td>pswapd</td>
	</tr>
	</table>

<br><br><br><br>

</td></table>





<div id="copyright">
Copyright &copy; 1999-2006 by Digital Mars, All Rights Reserved |
Page generated by <a href="http://www.digitalmars.com/d/ddoc.html">Ddoc</a>.
</div>

</body>
</html>

