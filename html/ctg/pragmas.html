
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>

<!--
	Copyright (c) 2001-2006 by Digital Mars
	All Rights Reserved
	www.digitalmars.com
  -->

<head>
<META http-equiv="content-type" content="text/html; charset=utf-8" >
<title>Digital Mars - Pragmas
</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div id="heading">
<a href="http://www.digitalmars.com/"><IMG SRC="dmlogo.gif" BORDER=0 WIDTH=270 HEIGHT=53 ALT="www.digitalmars.com"></a>

<a href="http://www.digitalmars.com/" title="www.digitalmars.com">Home</a>
| <a href="../advancedsearch.html" title="Search Digital Mars web site">Search</a>
| <a href="ctg.html" title="Compiler & Tools Guide">CTG</a>
| <a href="../rtl/rtl.html" title="Runtime Library Reference">RTL</a>
| <a href="../ugr/ugr.html" title="IDDE Reference">IDDE</a>
| <a href="../stl/index.html" title="Standard Template Library">STL</a>

	<div id="lastupdate">Last update Fri Apr 28 16:25:45 2006
</div>
</div>

<!-- Generated by Ddoc from pragmas.d -->



<table border=1 cellpadding=8 cellspacing=0 frame="void" summary="this table is for layout only">
<tr>
<td valign="top" class="toc" nowrap>
<small>
<center>
<form method="get" action="http://www.google.com/search">
<input id="q" name="q" size="10" value="Search" onFocus='if(this.value == "Search"){this.value="";}'>
<input type="hidden" id="domains" name="domains" value="www.digitalmars.com">
<input type="hidden" id="sitesearch" name="sitesearch" value="www.digitalmars.com/ctg">
<input type="hidden" id="sourceid" name="sourceid" value="google-search">
<input type="submit" id="submit" name="submit" value="Go">
</form>
</center>

    <a href="ctg.html"><b>Compiler & Tools Guide</b></a><br>

<hr><b>Compiling</b><br>

    &#149; <a href="ctgCompilingCode.html">Compiling Code</a><br>
    &#149; <a href="C-Language-Implementation.html">C Implementation</a><br>
    &#149; <a href="CPP-Language-Implementation.html">C++ Implementation</a><br>
    &#149; <a href="ctgLanguageImplementation.html">Language Extensions</a><br>
    &#149; <a href="ctgMixingLanguages.html">Mixing Languages</a><br>
    &#149; <a href="ctgAsm.html">Assembly Language</a><br>
    &#149; <a href="ctgInlineAsm.html">Inline Assembler</a><br>
    &#149; <a href="ctgOptimizer.html">Optimizing Code</a><br>
    &#149; <a href="ctgNumerics.html">Numerics Programming</a><br>
    &#149; <a href="regular.html">Regular Expressions</a><br>
    &#149; <a href="acrtused.html">Acrtused</a><br>
    &#149; <a href="pragmas.html">Pragmas</a><br>
    &#149; <a href="precompiled.html">Precompiled Headers</a><br>
    &#149; <a href="predefined.html">Predefined Macros</a><br>
    &#149; <a href="warnings.html">Warning Messages</a><br>
    &#149; <a href="ctgCompilerErrors.html">Error Messages</a><br>
    &#149; <a href="warnings.html#runtime">Runtime Messages</a><br>
    <br>

<hr><b>Linking</b><br>

    &#149; <a href="optlink.html">Optlink</a><br>
    &#149; <a href="ctgLinkSwitches.html">Switches</a><br>
    &#149; <a href="ctgDefFiles.html">Module Definition Files</a><br>
    &#149; <a href="ctgLinkOps.html">Operation and Design</a><br>
    &#149; <a href="OptlinkErrorMessages.html">Error Messages</a><br>
    <br>

<hr><b>Win32 Programming</b><br>

    &#149; <a href="win32programming.html#win32">Win32 Programming</a><br>
    <br>

<hr><b>DOS and Win16<br>Programming</b><br>

    &#149; <a href="ctgMemoryModel.html">Memory Models</a><br>
    &#149; <a href="pointers16.html">16 Bit Pointer Types<br> and Type Modifiers</a><br>
    &#149; <a href="win32programming.html#handle">Handle Pointers</a><br>
    &#149; <a href="win32programming.html#dos">DOS</a><br>
    &#149; <a href="dos32.html">DOS 32 (DOSX)</a><br>
    &#149; <a href="win32programming.html#win16">Win16</a><br>
    &#149; <a href="win32programming.html#win16dll">Win16 DLLs</a><br>
    &#149; <a href="windowspe.html">Win16 Prolog/Epilog</a><br>
    <br>

<hr><b>C/C++ Extensions</b><br>

    &#149; <a href="contract.html">Contract Programming</a><br>
    &#149; <a href="debugstatement.html">__debug statement</a><br>
    &#149; <a href="debugstatement.html#debugdeclaration">__debug declaration</a><br>
    &#149; <a href="trace.html">Dynamic Profiling</a><br>
    &#149; <a href="html.html">Embedding C in HTML</a><br>
    <br>

<hr><b>Tools</b><br>

    &#149; <a href="bcc.html" title="Convert Borland compiler commands">BCC</a><br>
    &#149; <a href="chmod.html" title="Examine and change file attributes">CHMOD</a><br>
    &#149; <a href="cl.html" title="Convert Microsoft compiler commands">CL</a><br>
    &#149; <a href="coff2omf.html" title="Convert COFF .obj and .lib to OMF">COFF2OMF</a><br>
    &#149; <a href="coffimplib.html" title="Convert COFF import library OMF">COFFIMPLIB</a><br>
    &#149; <a href="sc.html" title="Compiler command">DMC</a><br>
    &#149; <a href="diff.html" title="Compare files">DIFF</a><br>
    &#149; <a href="diffdir.html" title="Compare directories">DIFFDIR</a><br>
    &#149; <a href="dump.html" title="Dump files in hex">DUMP</a><br>
    &#149; <a href="dumpobj.html" title="Dump object files in hex">DUMPOBJ</a><br>
    &#149; <a href="dumpexe.html" title="Dump exe files">DUMPEXE</a><br>
    &#149; <a href="exe2bin.html" title="Create .com files">EXE2BIN</a><br>
    &#149; <a href="flpyimg.html" title="Read/Write Floppy Image">FLPYIMG</a><br>
    &#149; <a href="grep.html" title="Search files for string">GREP</a><br>
    &#149; <a href="ctgHelp.html" title="Creating Help Tools">HC</a><br>
    &#149; <a href="implib.html" title="Build import libraries">IMPLIB</a><br>
    &#149; <a href="lib.html" title="Object file librarian">LIB</a><br>
    &#149; <a href="libunres.html" title="Analyze library and object files">LIBUNRES</a><br>
    &#149; <a href="make.html" title="Simple make utility">MAKE</a><br>
    &#149; <a href="makedep.html" title="Update makefile dependencies">MAKEDEP</a><br>
    &#149; <a href="me.html" title="MicroEmacs Text Editor">ME</a><br>
    &#149; <a href="obj2asm.html" title="Object file disassembler">OBJ2ASM</a><br>
    &#149; <a href="patchobj.html" title="Patch object files">PATCHOBJ</a><br>
    &#149; <a href="ctgRC.html" title="Microsoft Resource compiler">RC</a><br>
    &#149; <a href="rcc.html" title="Digital Mars Resource compiler">RCC</a><br>
    &#149; <a href="sc.html" title="Compiler command">SC</a><br>
    &#149; <a href="shell.html" title="Shell scripts">SHELL</a><br>
    &#149; <a href="smake.html" title="Manage complex projects">SMAKE</a><br>
    &#149; <a href="touch.html" title="Set file timestamps">TOUCH</a><br>
    &#149; <a href="unmangle.html" title="Format C++ mangled names">UNMANGLE</a><br>
    &#149; <a href="whereis.html" title="Search for files">WHEREIS</a><br>
    <br>

<hr><b>Porting to DMC++</b><br>

    &#149; <a href="switchtodigitalmars.html">Switching to DMC++</a><br>
    &#149; <a href="switchtodigitalmars.html#microsoft">from Microsoft</a><br>
    &#149; <a href="switchtodigitalmars.html#borland">from Borland</a><br>
    &#149; <a href="ctgPorting.html">Porting Guide</a><br>
    <br>

</small>

<hr>

</td>
<td valign="top">


<h1>Pragmas</h1>

Digital Mars C++ implements the following #pragma directives. The 
preprocessor ignores unrecognized pragmas. 

<ul>
	<a href="#hashident">#ident</a><br>
	<a href="#alias">alias</a><br>
	<a href="#align">align</a><br>
	<a href="#code_seg">code_seg</a><br>
	<a href="#comment">comment</a><br>
	<a href="#cseg">cseg</a><br>
	<a href="#dbcs">dbcs</a><br>
	<a href="#DOSSEG">DOSSEG</a><br>
	<a href="#ident">ident</a><br>
	<a href="#include_alias">include_alias</a><br>
	<a href="#includelib">includelib</a><br>
	<a href="#init_seg">init_seg</a><br>
	<a href="#linkage">linkage</a><br>
	<a href="#message">message</a><br>
	<a href="#noreturn">noreturn</a><br>
	<a href="#once">once</a><br>
	<a href="#pack">pack</a><br>
	<a href="#setlocale">setlocale</a><br>
	<a href="#startaddress">startaddress</a><br>
</ul>

Pragma directives are case sensitive. They have the form: 

<pre>
	#pragma pragma-directive [pragma_args] 
</pre>

<a name="hashident">
<h4>#ident "<i>string</i>"</h4>
</a>

	Embed <i>string</i> in executable file.

<a name="alias">
<h4>#pragma alias("<i>name1</i>","<i>name2</i>")</h4>
</a>

	Inserts an alias record in the object file, where the linker will
	substitute references to <i>name1</i> with references to <i>name2</i>. The 
	strings are inserted into the object file verbatim.

<h4>#pragma alias(<i>identifier</i>,"<i>name2</i>")</h4>

	Inserts an alias record in the object file, where the linker will
	substitute references to the global symbol <i>identifier</i> with 
	references to <i>name2</i>. "<i>name2</i>" is inserted into the object file 
	verbatim.  The <i>identifier</i> must have already been declared.

<a name="align">
<h4>#pragma align [1|2|4|8|16]</h4>
</a>

	Obsolete. Use #pragma pack().

<a name="code_seg">
<h4>#pragma code_seg("<i>csname</i>")</h4>
</a>

	Causes subsequent code to be placed in the segment
	<i>csname</i>. When used with -NS, the -NS switch overrides the
	pragma for global far functions.
<p>
	The -NT, -NS and #pragma cseg can all be used independently
	or in any combination.

<a name="comment">
<h4>#pragma comment(compiler)</h4>
</a>

	Embed compiler version string in object file.

<h4>#pragma comment(lib,"<i>filespec</i>")</h4>

	This embeds a reference to the library filespec into the
	object file, so that the linker will search that library to
	resolve any undefined externals. This works the same as the
	INCLUDELIB directive in MASM.
<p>

	It is most useful when placed in the .h file that references
	a special library, for instance, in stream.h which references
	the oldstr<i>x</i>.lib library.

<h4>#pragma comment(exestr,"<i>string</i>")</h4>

	Embed <i>string</i> in executable file. Same as #ident "<i>string</i>".

<h4>#pragma comment(user,"<i>string</i>")</h4>

	Embed <i>string</i> in object file.

<a name="cseg">
<h4>#pragma cseg <i>csname</i></h4>
</a>

	Obsolete. Use #pragma code_seg().

<a name="dbcs">
<h4>#pragma dbcs</h4>
</a>

	This pragma defines how the compiler interprets double-byte 
	characters in character strings. The syntax is one of: 

<pre>
	#pragma dbcs()
	#pragma dbcs(<i>n</i>) 
	#pragma dbcs(push, <i>n</i>)
	#pragma dbcs(pop) 
</pre>

	#pragma dbcs() tells the compiler to interpret double-byte 
	characters as specified on the compiler command line, via the -j 
	compiler option (see Chapter 2). 
<p>

	#pragma dbcs(<i>n</i>) tells the compiler to interpret double-byte 
	characters according to the value for <i>n</i>, as follows: 

<pre>
	0 No double-byte characters in strings 
	1 Japanese 
	2 Chinese (Republic of China or People's Republic of China) 
	3 Korean 
</pre>

	Specify push and pop together, in combination with <i>n</i>. When 
	#pragma dbcs(push, <i>n</i>) is specified, the current value for <i>n</i> is 
	"pushed" and <i>n</i> is set to the specified value. When #pragma 
	dbcs(pop) is specified, the pushed value for <i>n</i> is "popped" and 
	becomes the current value again. 

<a name="DOSSEG">
<h4>#pragma DOSSEG</h4>
</a>

	Marks the generated object file with the DOSSEG switch. At least
	one object file in a program needs the DOSSEG switch (or the DOSSEG
	switch can be thrown on the linker) in order for the segments to
	be sorted in the right order. DOSSEG is normally in the startup
	code, this pragma is handy when not linking in the usual startup
	code from the runtime library.

<a name="ident">
<h4>#pragma ident</h4>
</a>

	This pragma is recognized and ignored. It is included for 
	compatibility with some UNIX software. 

<a name="include_alias">
<h4>#pragma include_alias( &lt;<i>filename</i>&gt;,&lt;<i>aliasname</i>&gt;)</h4>
<h4>#pragma include_alias( "<i>filename</i>","<i>aliasname</i>")</h4>
</a>

	This pragma is used when an include file has an alias. Whenever
	a #include "<i>filename</i>" is encountered, the "<i>aliasname</i>" is 
	substituted.  The same holds for &lt;&gt; names.
<p>

	The alias pragmas must lexically precede the #include directives 
	they affect.
<p>

	For example:

<pre>
	#pragma include_alias(&lt;stdio.h&gt;,&lt;mystudio.h&gt;)
	#include &lt;stdio.h&gt;
</pre>

	is equivalent to:

<pre>
	#include &lt;mystudio.h&gt;
</pre>

<a name="includelib">
<h4>#pragma includelib "<i>filespec</i>"</h4>
</a>

	Obsolete. Use #pragma comment(lib,"<i>filespec</i>")

<a name="init_seg">
<h4>#pragma init_seg(compiler|lib|user)</h4>
</a>

	Sets the segment into which static constructors go. All the static
	constructors in the 'compiler' segment get executed first, followed
	by the static constructors in the 'lib' segment, followed by the
	ones in the 'user' seg. The user seg is the default.

<a name="linkage">
<h4>#pragma linkage(<i>name</i>, _cdecl | _pascal | cdecl | far16 | pascal | system )</h4>
</a>

	<i>name</i> refers to a function, followed by an identifier giving the type
	of linkage for that function. The pragma can precede or follow the
	declaration of <i>name</i>. <i>name</i> cannot be overloaded.
	This pragma is for
	compatibility with IBM's C compiler.

<a name="message">
<h4>#pragma message "<i>text</i>"</h4>
</a>

	Causes the compiler to print <i>text</i> as an informational
	message while compiling.

<a name="noreturn">
<h4>#pragma noreturn(<i>identifier</i>)</h4>
</a>

	Where <i>identifier</i> is the name of a previously declared function.
	This pragma informs the compiler that the function does not
	return, enabling the compiler to generate improved code. The
	pragma is useful for marking functions like exit(), _exit(),
	abort(), longjmp() and especially _assert() (For those of us
	who use assert() macros a lot, this can be a significant win).

<a name="once">
<h4>#pragma once</h4>
</a>

	Use in an include file that should only be parsed once, regardless
	of the number of times it is #include'd. This can replace the
	clumsy (but portable) method of putting wrappers around the text:

<pre>
	In file.c:
		#ifndef __TEST_H
		#include "test.h"
		#endif
	In test.h:
		#ifndef __TEST_H
		#define __TEST_H 1
		... contents of file ...
		#endif
</pre>

	The simpler scheme is:
<pre>
	In file.c:
		#include "test.h"
	In test.h:
		#pragma once
</pre>

	Digital Mars's RCC resource compiler also supports this
	pragma. 

<a name="pack">
<h4>#pragma pack(<i>n</i>)</h4>
</a>

	Set the alignment for struct and class members to <i>n</i>.
	If <i>n</i> is blank,
	then the alignment is set to the default (affected by the -a
	command line switch).
	Example:
<pre>
		#pragma pack(__DEFALIGN)        // to default alignment
		struct ABC { ... };             // lay out structure
		#pragma pack()                  // back to previous alignment
</pre>

<h4>#pragma pack(push,<i>n</i>)</h4>

	Push the previous value of the struct member alignment. Set the
	new value to <i>n</i>.

<h4>#pragma pack(pop)</h4>

	Pop the value most recently pushed by #pragma(push,<i>n</i>),
	and set the
	current struct member alignment to that value. Always
	using push and pop pack pragmas in corresponding nested pairs.

<a name="setlocale">
<h4>#pragma setlocale("<i>locale</i>")</h4>
</a>

	Sets the current locale to "<i>locale</i>".
	The specified locale must be
	supported by the operating system. The locale controls how multibyte
	characters are handled in strings, and how multibyte strings are
	converted to Unicode. This is a better solution than the old -j
	switches. The default locale is "C".

<a name="startaddress">
<h4>#pragma startaddress(<i>name</i>)</h4>
</a>
	Puts a startaddress record into the object file.
	<i>name</i> must be a
	symbol that was previously declared, e.g.:
<pre>
	void startup();
	#pragma startaddress(startup)
</pre>
	Overloading of <i>name</i> is not supported.


<br><br><br><br>

</td></table>





<div id="copyright">
Copyright &copy; 1999-2006 by Digital Mars, All Rights Reserved |
Page generated by <a href="http://www.digitalmars.com/d/ddoc.html">Ddoc</a>.
</div>

</body>
</html>

