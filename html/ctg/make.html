
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>

<!--
	Copyright (c) 2001-2006 by Digital Mars
	All Rights Reserved
	www.digitalmars.com
  -->

<head>
<META http-equiv="content-type" content="text/html; charset=utf-8" >
<title>Digital Mars - MAKE
</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div id="heading">
<a href="http://www.digitalmars.com/"><IMG SRC="dmlogo.gif" BORDER=0 WIDTH=270 HEIGHT=53 ALT="www.digitalmars.com"></a>

<a href="http://www.digitalmars.com/" title="www.digitalmars.com">Home</a>
| <a href="../advancedsearch.html" title="Search Digital Mars web site">Search</a>
| <a href="ctg.html" title="Compiler & Tools Guide">CTG</a>
| <a href="../rtl/rtl.html" title="Runtime Library Reference">RTL</a>
| <a href="../ugr/ugr.html" title="IDDE Reference">IDDE</a>
| <a href="../stl/index.html" title="Standard Template Library">STL</a>

	<div id="lastupdate">Last update Fri Apr 28 16:25:46 2006
</div>
</div>

<!-- Generated by Ddoc from make.d -->




<table border=1 cellpadding=8 cellspacing=0 frame="void" summary="this table is for layout only">
<tr>
<td valign="top" class="toc" nowrap>
<small>
<center>
<form method="get" action="http://www.google.com/search">
<input id="q" name="q" size="10" value="Search" onFocus='if(this.value == "Search"){this.value="";}'>
<input type="hidden" id="domains" name="domains" value="www.digitalmars.com">
<input type="hidden" id="sitesearch" name="sitesearch" value="www.digitalmars.com/ctg">
<input type="hidden" id="sourceid" name="sourceid" value="google-search">
<input type="submit" id="submit" name="submit" value="Go">
</form>
</center>

    <a href="ctg.html"><b>Compiler & Tools Guide</b></a><br>

<hr><b>Compiling</b><br>

    &#149; <a href="ctgCompilingCode.html">Compiling Code</a><br>
    &#149; <a href="C-Language-Implementation.html">C Implementation</a><br>
    &#149; <a href="CPP-Language-Implementation.html">C++ Implementation</a><br>
    &#149; <a href="ctgLanguageImplementation.html">Language Extensions</a><br>
    &#149; <a href="ctgMixingLanguages.html">Mixing Languages</a><br>
    &#149; <a href="ctgAsm.html">Assembly Language</a><br>
    &#149; <a href="ctgInlineAsm.html">Inline Assembler</a><br>
    &#149; <a href="ctgOptimizer.html">Optimizing Code</a><br>
    &#149; <a href="ctgNumerics.html">Numerics Programming</a><br>
    &#149; <a href="regular.html">Regular Expressions</a><br>
    &#149; <a href="acrtused.html">Acrtused</a><br>
    &#149; <a href="pragmas.html">Pragmas</a><br>
    &#149; <a href="precompiled.html">Precompiled Headers</a><br>
    &#149; <a href="predefined.html">Predefined Macros</a><br>
    &#149; <a href="warnings.html">Warning Messages</a><br>
    &#149; <a href="ctgCompilerErrors.html">Error Messages</a><br>
    &#149; <a href="warnings.html#runtime">Runtime Messages</a><br>
    <br>

<hr><b>Linking</b><br>

    &#149; <a href="optlink.html">Optlink</a><br>
    &#149; <a href="ctgLinkSwitches.html">Switches</a><br>
    &#149; <a href="ctgDefFiles.html">Module Definition Files</a><br>
    &#149; <a href="ctgLinkOps.html">Operation and Design</a><br>
    &#149; <a href="OptlinkErrorMessages.html">Error Messages</a><br>
    <br>

<hr><b>Win32 Programming</b><br>

    &#149; <a href="win32programming.html#win32">Win32 Programming</a><br>
    <br>

<hr><b>DOS and Win16<br>Programming</b><br>

    &#149; <a href="ctgMemoryModel.html">Memory Models</a><br>
    &#149; <a href="pointers16.html">16 Bit Pointer Types<br> and Type Modifiers</a><br>
    &#149; <a href="win32programming.html#handle">Handle Pointers</a><br>
    &#149; <a href="win32programming.html#dos">DOS</a><br>
    &#149; <a href="dos32.html">DOS 32 (DOSX)</a><br>
    &#149; <a href="win32programming.html#win16">Win16</a><br>
    &#149; <a href="win32programming.html#win16dll">Win16 DLLs</a><br>
    &#149; <a href="windowspe.html">Win16 Prolog/Epilog</a><br>
    <br>

<hr><b>C/C++ Extensions</b><br>

    &#149; <a href="contract.html">Contract Programming</a><br>
    &#149; <a href="debugstatement.html">__debug statement</a><br>
    &#149; <a href="debugstatement.html#debugdeclaration">__debug declaration</a><br>
    &#149; <a href="trace.html">Dynamic Profiling</a><br>
    &#149; <a href="html.html">Embedding C in HTML</a><br>
    <br>

<hr><b>Tools</b><br>

    &#149; <a href="bcc.html" title="Convert Borland compiler commands">BCC</a><br>
    &#149; <a href="chmod.html" title="Examine and change file attributes">CHMOD</a><br>
    &#149; <a href="cl.html" title="Convert Microsoft compiler commands">CL</a><br>
    &#149; <a href="coff2omf.html" title="Convert COFF .obj and .lib to OMF">COFF2OMF</a><br>
    &#149; <a href="coffimplib.html" title="Convert COFF import library OMF">COFFIMPLIB</a><br>
    &#149; <a href="sc.html" title="Compiler command">DMC</a><br>
    &#149; <a href="diff.html" title="Compare files">DIFF</a><br>
    &#149; <a href="diffdir.html" title="Compare directories">DIFFDIR</a><br>
    &#149; <a href="dump.html" title="Dump files in hex">DUMP</a><br>
    &#149; <a href="dumpobj.html" title="Dump object files in hex">DUMPOBJ</a><br>
    &#149; <a href="dumpexe.html" title="Dump exe files">DUMPEXE</a><br>
    &#149; <a href="exe2bin.html" title="Create .com files">EXE2BIN</a><br>
    &#149; <a href="flpyimg.html" title="Read/Write Floppy Image">FLPYIMG</a><br>
    &#149; <a href="grep.html" title="Search files for string">GREP</a><br>
    &#149; <a href="ctgHelp.html" title="Creating Help Tools">HC</a><br>
    &#149; <a href="implib.html" title="Build import libraries">IMPLIB</a><br>
    &#149; <a href="lib.html" title="Object file librarian">LIB</a><br>
    &#149; <a href="libunres.html" title="Analyze library and object files">LIBUNRES</a><br>
    &#149; <a href="make.html" title="Simple make utility">MAKE</a><br>
    &#149; <a href="makedep.html" title="Update makefile dependencies">MAKEDEP</a><br>
    &#149; <a href="me.html" title="MicroEmacs Text Editor">ME</a><br>
    &#149; <a href="obj2asm.html" title="Object file disassembler">OBJ2ASM</a><br>
    &#149; <a href="patchobj.html" title="Patch object files">PATCHOBJ</a><br>
    &#149; <a href="ctgRC.html" title="Microsoft Resource compiler">RC</a><br>
    &#149; <a href="rcc.html" title="Digital Mars Resource compiler">RCC</a><br>
    &#149; <a href="sc.html" title="Compiler command">SC</a><br>
    &#149; <a href="shell.html" title="Shell scripts">SHELL</a><br>
    &#149; <a href="smake.html" title="Manage complex projects">SMAKE</a><br>
    &#149; <a href="touch.html" title="Set file timestamps">TOUCH</a><br>
    &#149; <a href="unmangle.html" title="Format C++ mangled names">UNMANGLE</a><br>
    &#149; <a href="whereis.html" title="Search for files">WHEREIS</a><br>
    <br>

<hr><b>Porting to DMC++</b><br>

    &#149; <a href="switchtodigitalmars.html">Switching to DMC++</a><br>
    &#149; <a href="switchtodigitalmars.html#microsoft">from Microsoft</a><br>
    &#149; <a href="switchtodigitalmars.html#borland">from Borland</a><br>
    &#149; <a href="ctgPorting.html">Porting Guide</a><br>
    <br>

</small>

<hr>

</td>
<td valign="top">


<h1>MAKE: Orchestrate build</h1>

Documentation for make.exe for Win32

<h2>Command line syntax</h2>

<pre>
	<b>make</b> {<i>target</i>} {<i>macro</i>=<i>text</i>} {<i>switch</i>}
</pre>

<dl>
    <dt><i>target</i>
    <dd>What targets to make

    <dt><i>macro</i>=<i>text</i>
    <dd>Define <i>macro</i> to be <i>text</i>

    <dt><i>switch</i>
    <dd>

    <dl>
	<dt><b>-d</b>
	<dd>Output debugging info.

	<dt><b>-f</b><i>file</i>
	<dd>Use file instead of <tt>makefile</tt>.

	<dt><b>-f</b> <i>file</i>
	<dd>Use file instead of <tt>makefile</tt>.

	<dt><b>-f-</b>
	<dd>Read makefile from <tt>stdin</tt>.

	<dt><b>-h</b>
	<dd>Print help message.

	<dt><b>-i</b>
	<dd>Ignore errors from executing make rules.

	<dt><b>-l</b>
	<dd>Show macro expansions in <tt>makefile</tt>.

	<dt><b>-n</b>
	<dd>Make rules are not executed, just written to <tt>stdout</tt>.

	<dt><b>-q</b>
	<dd>Return with errorlevel 1 if rules would be executed.

	<dt><b>-s</b>
	<dd>Do not echo make rules.

	<dt><b>-t</b>
	<dd>Just touch files.
    </dl>
</dl>

<h2>Environment Variables</h2>

	<b>make</b> looks for the environment variable <b>MAKEFLAGS</b>
	upon startup.
	The string for <b>MAKEFLAGS</b>, if any, is parsed as if it was typed
	on the command line for the actual command line is parsed.
	For example:

<pre>
	SET <b>MAKEFLAGS</b>=CFLAGS=-D
	<b>make</b> target
</pre>

	is equivalent to:

<pre>
	<b>make</b> CFLAGS=-D target
</pre>

<h2>The Makefile</h2>

    A makefile is a text file containing a sequence of:

    <ul>
	<li> Comment lines
	<li> Blank lines
	<li> Macro definition lines
	<li> Explicit definition lines
	<li> Implicit definition lines
	<li> Rule lines
    </ul>

    If the last character on a line is a \, then the line is concatenated
    with the next line in the file. The \ and all immediately following
    spaces and tabs are removed and replaced with a single space.

<h3>Comment lines</h3>

	Comment lines are lines in which the first non-blank character
	is a #. Comment lines are ignored. Comment lines are removed before
	\ line splicing is done.

<h3>Blank lines</h3>

	Blank lines contain zero or more tabs or spaces. Blank lines
	are ignored.

<h3>Macro definition lines</h3>

	Macros are defined with lines of the form:

<pre>
	<i>MACRO</i> = <i>text</i>
</pre>

	Spaces and tabs around the = are stripped.
	They are used:

<pre>
	$(<i>MACRO</i>)
</pre>

	Single character macro names do not need () when expanded.
	Definitions for macros are searched for in the following order:
	<ol>
		<li> Definitions from the command line.
		<li> Definitions in the makefile.
		<li> Definitions from the environment.
		<li> The macro is expanded to nothing.
	</ol>

<h3>Explicit Definition lines</h3>

<pre>
	target [target ...] : [dependency ...] [; rule] [# ... ]
</pre>

<h3>Implicit Definition lines</h3>

<pre>
	.targ_ext.dep_ext : [; rule] [# ... ]
</pre>

<h3>Rule lines</h3>

<pre>
	tab [rule flag] rule [# ...]
</pre>

<h3>Predefined macros</h3>

	<table border=1 cellspacing=0 cellpadding=5>
	<tr>
	<td><b>$?</b>
	<td>List of dependencies that are newer than target
	<tr>
	<td><b>$**</b>
	<td>Full list of dependencies
	<tr>
	<td><b>$*</b>
	<td>Name of current target without extension
	<tr>
	<td><b>$&lt;</b>
	<td>From name of current target, if made using a implicit rule
	<tr>
	<td><b>$@</b>
	<td>Full target name
	<tr>
	<td><b>$$</b>
	<td>Expand to <b>$</b>
	</table>

<h3>Rule flags</h3>

	Rules can be preceeded by one of the following characters:

	<table border=1 cellspacing=0 cellpadding=5>
	<tr>
	<td><b>+</b>
	<td>Force use of <tt>COMMAND.COM</tt> or <tt>CMD.EXE</tt>
	to execute the rule.
	This is useful for <tt>.BAT</tt> files.
	<tr>
	<td><b>-</b>
	<td>Ignore exit status from this rule.
	<tr>
	<td><b>@</b>
	<td>Do not echo this rule when it's executed.
	<tr>
	<td><b>*</b>
	<td>Use _CMDLINE environment variable to pass long command lines.
	<tr>
	<td><b>~</b>
	<td>Use _CMDLINE environment variable to pass command line.
	</table>

<h3>Win32 internal commands</h3>

	The following commands are internal to Win32, that is,
	when <b>make</b> executes one it does so by executing CMD.EXE
	and passing the line to be executed to it. The internal
	commands are:

<pre>
		break,cd,chdir,cls,copy,ctty,
		date,del,dir,echo,erase,exit,
		if,md,mkdir,pause,
		rd,rem,rmdir,ren,rename,
		time,type,ver,verify,vol
</pre>

<h3>Long command lines</h3>

	Windows and DOS have limits on the length of a command line.
	Under DOS, this limit is 127. Under Win32, it varies from version
	to version and can depend on end user configuration.
	<b>make</b> assumes a command line limit of 996.
	If this limit is exceeded, and the rule is known to or flagged
	as accepting long command lines via the environment, the long
	command line is passed via the environment variable <b>_CMDLINE</b>.
	The actual command line the rule sees is <tt>@_CMDLINE</tt>.
	If writing programs to make use of this, use the
	<a href="../rtl/dos2.html#response_expand"><b>response_expand()</b></a>
	function in the program.
	To flag a rule as accepting this form, use the <b>*</b> rule
	flag.
	If running under a version of Windows that cannot handle 996
	character command lines, use the <b>~</b> rule flag to tell <b>make</b>
	to pass the command line via <b>_CMDLINE</b>.


<h3>Special targets</h3>

<dl>
	<dt><b>.SILENT</b>
		<dd>Same as if <b>-s</b> was specified on command line.
		Do not put a : after this.

	<dt><b>.IGNORE</b>
		<dd>Same as if <b>-i</b> was specified on command line.
		Do not put a : after this.

	<dt><b>.DEFAULT</b>
		<dd>Rules following this target are executed for targets
		that have no rules specified for them.
		Any dependencies listed for the <b>.DEFAULT</b> target are
		ignored.
</dl>

<h3>Default makefile</h3>

	The default makefile (if the <b>-f</b> flag is not given) is "makefile".

<h3>Logging</h3>

	For long and verbose makes, the output of make along with all
	messages can be redirected to a log file for later perusal.

<pre>
	make &gt;log
</pre>

	Note that only stdout output of programs run by <b>make</b> are redirected.
	<b>sc.exe</b>, etc. all redirect fine. <b>masm</b> 4.0 and earlier
	versions won't.

<h2>Error messages</h2>

<dl>
	<dt>undefined switch '<i>xxxx</i>'
	<p>
	<dt>bad macro definition '<i>xxxx</i>'
	<p>
	<dt>can't read makefile '<i>xxxx</i>'
	<p>
	<dt>target must appear before commands
		<dd>Can't specify rules before any targets.
	<p>
	<dt>unrecognized target '<i>xxxx</i>'
		<dd>Target was not one of <b>.SILENT</b> or <b>.IGNORE</b>.
	<p>
	<dt>command line too long
		<dd>Rules to be executed by CMD.EXE cannot exceed 124 bytes
		in length.
	<p>
	<dt>expanded line is too long
		<dd>Argument to a command exceeds 127 bytes in length.
	<p>
	<dt>')' expected
	<p>
	<dt>expecting target : dependencies
		<dd>Could not decipher target line.
	<p>
	<dt>ambiguous implicit rule
		<dd>Two implicit rules were found for the same from and to
		extensions.
	<p>
	<dt>bad syntax for implicit rule
		<dd>Implicit rule syntax is of the form:
<pre>
	.from.to :
</pre>
		No dependencies are allowed for a implicit rule.
	<p>
	<dt>undefined macro '<i>xxxx</i>'
	<p>
	<dt>don't know how to make '<i>xxxx</i>'
		<dd>The file <i>xxxx</i> does not exist and no rules were specified
		for making it.
	<p>
	<dt>'<i>xxxx</i>' not found
		<dd>Could not find the command <i>xxxx</i> along the search path.
	<p>
	<dt>out of memory
</dl>

<h2>Other</h2>
	When a rule is executed and it returns a non-zero exit status, the
	message:

<pre>
	--- errorlevel <i>exitstatus</i>
</pre>

	is printed and <b>make</b> terminates
	(unless <b>make</b> was instructed to ignore
	the exit status).
	<p>

	A # indicates a comment. The rest of the line is ignored.


<br><br><br><br>

</td></table>






<div id="copyright">
Copyright &copy; 1999-2006 by Digital Mars, All Rights Reserved |
Page generated by <a href="http://www.digitalmars.com/d/ddoc.html">Ddoc</a>.
</div>

</body>
</html>

