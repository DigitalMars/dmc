
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>

<!--
	Copyright (c) 2001-2006 by Digital Mars
	All Rights Reserved
	www.digitalmars.com
  -->

<head>
<META http-equiv="content-type" content="text/html; charset=utf-8" >
<title>Digital Mars - Lesson 1: Create the DOS Application
</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div id="heading">
<a href="http://www.digitalmars.com/"><IMG SRC="dmlogo.gif" BORDER=0 WIDTH=270 HEIGHT=53 ALT="www.digitalmars.com"></a>

<a href="http://www.digitalmars.com/" title="www.digitalmars.com">Home</a>
| <a href="../advancedsearch.html" title="Search Digital Mars web site">Search</a>
| <a href="../ctg/ctg.html" title="Compiler & Tools Guide">CTG</a>
| <a href="../rtl/rtl.html" title="Runtime Library Reference">RTL</a>
| <a href="../ugr/ugr.html" title="IDDE Reference">IDDE</a>
| <a href="../stl/index.html" title="Standard Template Library">STL</a>

	<div id="lastupdate">Last update Fri Apr 28 16:30:17 2006
</div>
</div>

<!-- Generated by Ddoc from chapter10.d -->





<table border=1 cellpadding=8 cellspacing=0 frame="void" summary="this table is for layout only">
<tr>
<td valign="top" class="toc">
<small>
<center>
<form method="get" action="http://www.google.com/search">
<input id="q" name="q" size="10" value="IDDE Search" onFocus='if(this.value == "IDDE Search"){this.value="";}'>
<input type="hidden" id="domains" name="domains" value="www.digitalmars.com">
<input type="hidden" id="sitesearch" name="sitesearch" value="www.digitalmars.com/ugr">
<input type="hidden" id="sourceid" name="sourceid" value="google-search">
<input type="submit" id="submit" name="submit" value="Go">
</form>

    <a href="ugr.html"><b>IDDE<br>Reference</b></a><br><br>
</center>

<b>Part 1: Welcome to Digital Mars C++</b><br>
    1. <a href="chapter1.html">Introducing Digital Mars C++</a></br>
    2. <a href="chapter2.html">Introducing the IDDE</a></br>
<hr>
<b>Part 2: Creating an Application with Digital Mars C++</b><br>
    3. <a href="chapter3.html">Starting a Project and Defining Workspaces</a></br>
    4. <a href="chapter4.html">Generating an Application Framework</a></br>
    5. <a href="chapter5.html">Defining Classes and Their Hierarchies</a></br>
    6. <a href="chapter6.html">Editing Program Code</a></br>
    7. <a href="chapter7.html">Adding Look and Feel with Resources</a></br>
    8. <a href="chapter8.html">Testing an Application</a></br>
<hr>
<b>Part 3: Learning Digital Mars C++ by Example</b><br>
    9. <a href="chapter9.html">Introduction to the Tutorial</a></br>
    10. <a href="chapter10.html">Lesson 1: Create the DOS Application</a></br>
    11. <a href="chapter11.html">Lesson 2: Generate an Application Framework</a></br>
    12. <a href="chapter12.html">Lesson 3: Customize the Interface</a></br>
    13. <a href="chapter13.html">Lesson 4: Add Messages with ClassExpress</a></br>
    14. <a href="chapter14.html">Lesson 5: Add a Dialog Box with ClassExpress</a></br>
<hr>
<b>Part 4: More about Creating Programs</b><br>
    15. <a href="chapter15.html">More about Projects and Workspaces</a></br>
    16. <a href="chapter16.html">More about Project Build Settings</a></br>
    17. <a href="chapter17.html">More about AppExpress</a></br>
    18. <a href="chapter18.html">More about ClassExpress</a></br>
    19. <a href="chapter19.html">Class Editor Reference</a></br>
    20. <a href="chapter20.html">Hierarchy Editor Reference</a></br>
    21. <a href="chapter21.html">Text Editor Reference</a></br>
    22. <a href="chapter22.html">Using Version Control</a></br>
<hr>
<b>Part 5: More about Testing Programs</b><br>
    23. <a href="chapter23.html">Controlling and Configuring the Debugger</a></br>
    24. <a href="chapter24.html">Commands Available in Debugging Mode</a></br>
<hr>
<b>Part 6: About Managing Resources</b><br>
    25. <a href="chapter25.html">ResourceStudio Resource Editor</a></br>
    26. <a href="chapter26.html">Dialog Editor</a></br>
    27. <a href="chapter27.html">Menu, Accelerator and String Table Editors</a></br>
    28. <a href="chapter28.html">Bitmap, Cursor, Icon, and Font Editors</a></br>
    29. <a href="chapter29.html">Version Information and Custom Resource Editors</a></br>
<hr>
<b>Part 7: Appendixes</b><br>
    A. <a href="appendixa.html">Expression Evaluation</a></br>
    B. <a href="appendixb.html">IDDE Settings and Command-Line Options</a></br>
    C. <a href="appendixc.html">Using NetBuild</a></br>

</small>

<hr>


</td>
<td valign="top">


<h1>10. Lesson 1: Create the DOS Application</h1>

In this chapter you learn basic procedures for using the Integrated 
Development and Debugging Environment (IDDE) while building a 
DOS version of the TML Reader. This lesson teaches you to: 

<ul>
	<li> Start the IDDE and load a project 
	<li> Edit source code 
	<li> Build and run the application 
	<li> Create a debugging workspace 
	<li> Run the application in debugging mode 
</ul>

Most of the code for the application has already been written; during 
the lesson you will add a few final lines. At the end of the lesson, 
you will have a DOS executable that can read and display TML files. 


<h2>Starting the IDDE and Loading a Project</h2>

To start the IDDE: 
<p>


First, start the IDDE. If you haven't yet installed Digital Mars C++, 
please see the Getting Started Guide for installation instructions. 


<ol>
	<li> Double-click on the Digital Mars C++ 16-bit group icon in 
	the Windows Program Manager. (If the Digital Mars C++ 
	16-bit group is already open, you may omit this step.) 

	<li> Double-click on the Digital Mars C++ icon. The IDDE main 
	window opens at the top of the screen (see Figure 10-1). 
	<p>
	<img align="middle" src="figure10_1.gif">
	<p>
	[Figure 10-1 The IDDE main window and Workspace toolbox]
	<p>
</ol>

The IDDE main window contains a title bar and a menu bar. Below 
the main window is the Workspace toolbox, used to switch between 
workspaces (described later in this chapter). The Workspace toolbox 
is currently docked under the IDDE menu bars. Additional IDDE 
windows open below the main window and Workspace toolbox. 
You can open other IDDE windows by selecting their names from 
the <b>Goto View</b> submenu of the <b>Window</b> menu; close any window 
by clicking the Close button in its upper-left corner. 
<p>


Next, you must load the DOS TML Reader project. (A project is a 
collection of source and other support files from which an 
executable is generated.) To open the project: 


<ol>
	<li> Choose <b>Open</b> from the IDDE's <b>Project</b> menu. 

	<li> Use the <b>Open Project</b> dialog box to find 
	<tt>samples\tutorial\lesson1\start\tmldos.prj,</tt>
	located under the directory in which you installed 
	Digital Mars C++. 

	<li> Click OK. 
</ol>


You can view the project's source file list in the Project window. If 
the Project window is not already open, choose <b>Project</b> from the 
<b>Goto View</b> submenu of the <b>Window</b> menu. 
<p>


In the next section you edit one of the source files. 


<h2>Editing Source Code</h2>

The DOS TML Reader's source code needs a minor addition before 
compilation. To add the missing lines, you must edit the source code 
in a Source window. 

<ol>
	<li> In the Project window, double-click on <tt>display.c</tt>. 
	A Source window opens, showing the contents of the 
	source file (see Figure 10-2). 
	<p>
	<img align="middle" src="figure10_2.gif">
	<p>
	[Figure 10-2 Source window]
	<p>

	<li> Choose <b>Function</b> from the Source window's <b>Goto</b> 
	menu. The <b>Goto Function</b> dialog box opens. 

	<li> Select Display from the Function Name listbox, then 
	click OK. The editor moves to the start of Display(). 

	<li> Choose <b>Find</b> from the <b>Edit</b> menu. The <b>Find</b> dialog box 
	opens. 

	<li> In the Pattern textbox, type <tt>LESSON 1</tt>. 

	<li> Click on Next. 

	<li> You should see the following line in the source code: 

	<pre>
	/* INSERT CODE FOR LESSON 1 HERE! */ 
	</pre>

	Just after this comment, but before the procedure's 
	closing brace, insert the following two lines of code: 

	<pre>
	disp_move(disp_numrows - 1, 0);
	disp_eeol(); 
	</pre>


	<li> Choose <b>Save</b> from the <b>File</b> menu. 
</ol>

The DOS TML Reader is now ready to be compiled. 
In the next section you learn to build and run the project, and you 
look at a sample document. 


<h2>Building and Running the Application</h2>

To build and run the DOS TML Reader: 

<ol>
	<li> From the IDDE's <b>Project</b> menu, choose <b>Rebuild All</b>. 
	<p>

	The Output window opens automatically. This window informs you 
	of build progress and displays any warning or error messages. If no 
	errors exist, you see the message "Successful build." (You can still 
	work in the IDDE while the build is in progress, because the process 
	of building is multitasked. The Output window can be behind other 
	IDDE windows, even when messages are being written to it.) 

	<li> From the IDDE's <b>Project</b> menu, choose <b>Arguments</b>. 
	The <b>Run Arguments</b> dialog box opens. 

	<li> Type <tt>sample.tml</tt> into the textbox and click OK. 

	<li> From the <b>Project</b> menu, choose <b>Execute Program</b>. 
</ol>

The TML Reader opens in full-screen mode, showing the formatted 
contents of <tt>sample.tml</tt> (see Figure 10-3). You can use Page Up, 
Page Down, and the arrow keys to scroll through the file. To execute 
a hyperlink, position the cursor over text shown in reverse video and 
press Enter. Press Escape to exit the program and return to the IDDE. 

	<p>
	<img align="middle" src="figure10_3.gif">
	<p>
	[Figure 10-3 The DOS TML Reader]
	<p>

The DOS TML Reader is believed to be without any significant bugs. 
However, most applications have bugs during at least some of their 
development phase. To help you locate and correct incorrect code 
as quickly as possible, the IDDE has powerful debugging features. 
<p>


The following sections show you how to set up a workspace for 
debugging and debug your source code. 


<h2>Setting Up a Workspace for Debugging</h2>

A workspace is an arrangement of windows on the screen. You can 
set up several useful configurations of IDDE windows, then switch 
between them by clicking on workspace names in the Workspace 
toolbox. 
<p>


The IDDE predefines a workspace named Debugging, which 
contains a configuration of windows useful for typical debugging 
sessions. Here, however, we define a new workspace specific to this 
lesson, to show you how this is done and to avoid disturbing any 
customizations you may have already made to the Debugging 
workspace. 
<p>


To create a workspace for debugging: 

<ol>
	<li> Choose <b>New</b> from the <b>Workspace</b> submenu of the 
	IDDE's <b>Environment</b> menu. 

	<li> When prompted for a workspace name, type <tt>Lesson1</tt>. 

	<li> Click OK. 
</ol>

The IDDE creates a new workspace and adds the workspace name 
to the Workspace toolbox. Initially the new workspace is empty, 
with the exception of a few toolboxes that are not needed here. To 
close the toolboxes, click the Close buttons in the upper-left corners. 
<p>

Next, you need to add windows to the workspace. During 
debugging, the Source window follows program execution, the 
Function window views a list of functions in a particular program 
module, the Data/ Object window views program data, and the Call 
window displays the program call chain. 


<ol>
	<li> To open the Project window, press Ctrl+Shift+P. 

	<li> In the Project window, double-click on <tt>main.c</tt>. A 
	Source window opens. 

	<li> To open the Function window, press Ctrl+Shift+F. 

	<li> To open the Data/Object window, press Ctrl+Shift+D. 

	<li> To open the Call window, press Ctrl+Shift+L. 
</ol>


Other debugging windows are available as well; see Chapter 24, 
<a href="chapter24.html">Commands Available in Debugging Mode</a>,
for more information. 
<p>


Arrange the windows the way you want them (one example is 
shown in Figure 10-4), then choose <b>Save Workspace Set</b> from the 
<b>Workspace</b> submenu of the IDDE's <b>Environment</b> menu. 

	<p>
	<img align="middle" src="figure10_4.gif">
	<p>
	[Figure 10-4 A possible Lesson 1 workspace]
	<p>

Now that the workspace is ready, you can begin debugging. The 
following section shows you how to run the application in 
debugging mode and how to set a breakpoint on a function, how to 
view program data, and how to step through code. 


<h2>Running in Debugging Mode</h2>

To execute the application in debugging mode, click in the Source 
window, then choose <b>Start/Restart Debugging</b> from the IDDE's 
<b>Debug menu</b>. Several things happen: 

<ol>
	<li> The IDDE opens a window (the Digital Mars Application 
	Window), in which the application runs. This window 
	may be behind other windows. 

	<li> The application is executed to the start of main. 

	<li> The Source window changes to debugging mode (see 
	Figure 10-5). Arrows indicating execution points within 
	functions, and flags indicating breakpoints are shown in 
	the left margin. You cannot edit the code while in 
	debugging mode. 

	<p>
	<img align="middle" src="figure10_5.gif">
	<p>
	[Figure 10-5 Source window in debugging mode]
	<p>

	<li> The Project window changes to debugging mode (see 
	Figure 10-6). The icons next to the source module names 
	change to indicate their status: 

	<ul>
		<li> A bug symbol indicates that the module contains 
		debugging information. 

		<li> A small "T" indicates that tracing is enabled in the 
		module. 

		<li> A green dot indicates that a breakpoint is set and 
		enabled in the module. 

		<p>
		<img align="middle" src="figure10_6.gif">
		<p>
		[Figure 10-6 Project window in debugging mode]
	</ul>

	<li> The Function window is updated to show a list of 
	functions in the program (see Figure 10-6). An arrow 
	next to main indicates that it is in the call chain; a 
	diamond indicates that a breakpoint is set. 

	<p>
	<img align="middle" src="figure10_7.gif">
	<p>
	[Figure 10-7 Function window]

	<li> The Call window is updated to show the call chain and 
	execution status (see Figure 10-8). 

	<p>
	<img align="middle" src="figure10_8.gif">
	<p>
	[Figure 10-8 Call window]
</ol>

You can now perform the following simple debugging tasks. 


<h3>Setting and running to breakpoints</h3>

To set a breakpoint on a function and execute to it: 

<ol>
	<li> Click and drag <tt>display.c</tt> from the Project window to 
	the Source window. 

	<li> Choose <b>Set/Clear Breakpoint</b> from the <b>Bpt</b> menu. A 
	breakpoint is set at the start of <tt>ShowScreen</tt>. 

	<li> Choose <b>Go Until Breakpoint</b> from the IDDE's <b>Debug</b> 
	menu. The program is executed to the start of 
	<tt>ShowScreen</tt>. 
</ol>


The Source window shows the line at which execution stopped. The 
Call window shows functions in the call chain (see Figure 10-9). 

	<p>
	<img align="middle" src="figure10_9.gif">
	<p>
	[Figure 10-9 Call chain to function ShowScreen]

<h3>Viewing data</h3>

You can view program data using the following commands: 

<ol>
	<li> Choose <b>Data</b> from the <b>Show</b> submenu of the Source 
	window's pop-up menu. The Data/Object window is 
	updated to show the local data in <tt>ShowScreen</tt> (see 
	Figure 10-10). 

	<p>
	<img align="middle" src="figure10_10.gif">
	<p>
	[Figure 10-10 Data/Object window showing local data]

	<li> In the Call window, click on main, then choose <b>Data</b> 
	from the <b>Show</b> menu. The Data/Object window is 
	updated to show the local data in <tt>main</tt>. 

	<li> Choose <b>Local/Global Data</b> from the Data/Object 
	window's <b>View</b> menu. The Data/Object window is 
	updated to display global data accessible in the current 
	module. Choose <b>Local/Global Data</b> again to resume 
	display of local data. 
</ol>


<h3>Stepping through code</h3>

To step through the source code line-by-line: 

<ol>
	<li> Choose <b>Step Into</b> from the IDDE's <b>Debug</b> menu (or 
	press F8) seven times. The IDDE executes seven lines of 
	code. The seventh step takes execution into <tt>ShowLine</tt>; 
	at that point the Call window adds <tt>ShowLine</tt> to the call 
	chain, and the Data/Object window is updated to display 
	the function's local data. 

	<li> Choose <b>Return from Call</b> from the IDDE's <b>Debug</b> menu 
	to execute the rest of <tt>ShowLine</tt> and return to the 
	calling function. 

	<li> Choose <b>Step Over</b> from the IDDE's <b>Debug</b> menu (or 
	press F10) several times. The IDDE executes some lines 
	of code in the function, but it does not step into 
	subroutines. <tt>ShowScreen</tt> is in a loop that writes lines 
	to the screen one-by-one. The results appear in the 
	Digital Mars Application Window. 
</ol>


<h3>Running to the end</h3>

To execute the rest of the program, ignoring breakpoints, choose <b>Go 
Until End</b> from the IDDE's <b>Debug</b> menu. Bring the Digital Mars 
Application Window to the front and test the program as usual. You 
can press Alt+Ctrl+SysRq to break to the debugger, or let the 
program terminate before resuming your debugging session. (In the 
DOS TML Reader, you must press Escape to end the program.) 


<h3>Ending the debugging session</h3>

To exit debugging mode, choose <b>Stop Debugging</b> from the IDDE's 
<b>Debug</b> menu. You can do this at any time during debugging; you 
don't have to choose <b>Go Until End</b> first. 
<p>

In this chapter you have learned how to start the IDDE, load a 
project, edit source code, build and run the application, and run in 
debugging mode. These are the fundamental tasks you perform 
repeatedly as you develop your own applications, whether you are 
developing in C or C++, for DOS or for Windows. In the following 
lessons, you learn about the IDDE's more advanced features, many 
of which are designed specifically for Windows application 
development in C++. 


<br><br><br><br>

</td></table>






<div id="copyright">
Copyright &copy; 1999-2006 by Digital Mars, All Rights Reserved |
Page generated by <a href="http://www.digitalmars.com/d/ddoc.html">Ddoc</a>.
</div>

</body>
</html>

